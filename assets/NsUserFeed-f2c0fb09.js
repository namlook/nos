import{f as e,V,W as k,h as U,d as F,r as N,q as g,o as p,c as f,b as l,e as _,F as h,g as x,H as I,_ as E}from"./index-11704ec7.js";import{u as R,a as T,N as q}from"./NsEvent-74c473b1.js";import{s as v}from"./inputswitch.esm-b1f6dde9.js";const C=[6,16],D=7,K=1,S=30023,{fetch:b,fetchContacts:w}=U();function B(m,a,{showReplies:r,showReactions:u,showReposts:i}){return R({queryKey:["ns-user-feed",m,a,r,u,i],async queryFn(){let c=[];if(e(m)==="activity")c=[V(e(a))];else{const n=await w(e(a)),o=n==null?void 0:n.tags.filter(s=>s[0]==="p");c=(o==null?void 0:o.map(s=>s[1]).filter(s=>s!==e(a)))??[]}if(c.length){const n=[K,S];e(u)===!0&&n.push(D),e(i)===!0&&n.push(...C);let o=await b([{kinds:n,authors:c,limit:150}]);return e(r)===!1&&(o=o.filter(s=>!k(s))),o.sort((s,y)=>y.created_at-s.created_at)}return[]}})}const L={class:"ns-user-feed-component"},j={class:"flex justify-content-between mb-4 inset-shadow-1 p-5 border-round"},A={class:"flex align-items-center gap-2"},H=l("span",null,"Reposts",-1),O={class:"flex align-items-center gap-2"},Q=l("span",null,"Replies",-1),P={class:"flex align-items-center gap-2"},W=l("span",null,"Reactions",-1),X={key:0,class:"flex flex-column gap-4"},z={key:1,class:"flex flex-column gap-4"},G=F({__name:"NsUserFeed",props:{type:{type:String,required:!0},pubkey:{type:String,required:!0}},setup(m){const a=m,r=N(!1),u=N(!1),i=N(!0),c=g(()=>a.pubkey),n=g(()=>a.type),{isLoading:o,data:s}=B(n,c,{showReactions:u,showReplies:r,showReposts:i});return(y,d)=>(p(),f("div",L,[l("div",j,[l("div",A,[_(e(v),{modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=t=>i.value=t)},null,8,["modelValue"]),H]),l("div",O,[_(e(v),{modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=t=>r.value=t)},null,8,["modelValue"]),Q]),l("div",P,[_(e(v),{modelValue:u.value,"onUpdate:modelValue":d[2]||(d[2]=t=>u.value=t)},null,8,["modelValue"]),W])]),e(o)?(p(),f("div",X,[(p(),f(h,null,x(5,t=>_(T,{key:t})),64))])):(p(),f("div",z,[(p(!0),f(h,null,x(e(s),t=>(p(),I(q,{key:t.id,event:t},null,8,["event"]))),128))]))]))}}),Z=E(G,[["__file","/Users/nicolasc/Documents/projects/others/nosworld/src/components/structures/NsUserFeed/NsUserFeed.vue"]]);export{Z as N};
