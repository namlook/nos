import{W as ae,X as h,Y as ne,Z as ie,m as se,$ as le,o as s,c as d,b as p,F as E,g as re,p as v,w as oe,a0 as y,a1 as K,a2 as S,a3 as M,q as g,t as P,d as V,a4 as ce,r as C,f as k,s as O,j,a as W,O as J,L as f,i as X,u as ue,k as de,l as U,a5 as pe,a6 as q,a7 as fe,e as F,a8 as z,a9 as ve}from"./index-1e8cf9a7.js";import{_ as me}from"./NsUserFeed.vue_vue_type_script_setup_true_lang-7d0a34f8.js";var be=`
.p-tabmenu {
    overflow-x: auto;
}

.p-tabmenu-nav {
    display: flex;
    margin: 0;
    padding: 0;
    list-style-type: none;
    flex-wrap: nowrap;
}

.p-tabmenu-nav a {
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    position: relative;
    text-decoration: none;
    text-decoration: none;
    overflow: hidden;
}

.p-tabmenu-nav a:focus {
    z-index: 1;
}

.p-tabmenu-nav .p-menuitem-text {
    line-height: 1;
}

.p-tabmenu-ink-bar {
    display: none;
    z-index: 1;
}

.p-tabmenu::-webkit-scrollbar {
    display: none;
}
`,he={root:"p-tabmenu p-component",menu:"p-tabmenu-nav p-reset",menuitem:function(e){var a=e.instance,c=e.props,u=e.index,i=e.item,I=e.isActive,r=e.isExactActive;return["p-tabmenuitem",{"p-highlight":(c.exact?r:I)||a.d_activeIndex===u,"p-disabled":a.disabled(i)}]},action:"p-menuitem-link",icon:"p-menuitem-icon",label:"p-menuitem-text",inkbar:"p-tabmenu-ink-bar"},ye=ae(be,{name:"tabmenu",manual:!0}),ge=ye.load,ke={name:"BaseTabMenu",extends:ie,props:{model:{type:Array,default:null},exact:{type:Boolean,default:!0},activeIndex:{type:Number,default:0},"aria-labelledby":{type:String,default:null},"aria-label":{type:String,default:null}},css:{classes:he,loadStyle:ge},provide:function(){return{$parentInstance:this}}},Y={name:"TabMenu",extends:ke,emits:["update:activeIndex","tab-change"],timeout:null,data:function(){return{d_activeIndex:this.activeIndex}},watch:{$route:function(){var e=this;this.timeout=setTimeout(function(){return e.updateInkBar()},50)},activeIndex:function(e){this.d_activeIndex=e}},mounted:function(){this.updateInkBar();var e=this.findActiveItem();e&&(e.tabIndex="0")},updated:function(){this.updateInkBar()},beforeUnmount:function(){clearTimeout(this.timeout)},methods:{getPTOptions:function(e,a,c){return this.ptm(e,{context:{item:a,index:c}})},onItemClick:function(e,a,c,u){if(this.disabled(a)){e.preventDefault();return}a.command&&a.command({originalEvent:e,item:a}),a.to&&u&&u(e),c!==this.d_activeIndex&&(this.d_activeIndex=c,this.$emit("update:activeIndex",this.d_activeIndex)),this.$emit("tab-change",{originalEvent:e,index:c})},onKeydownItem:function(e,a,c,u){switch(e.code){case"ArrowRight":{this.navigateToNextItem(e.target),e.preventDefault();break}case"ArrowLeft":{this.navigateToPrevItem(e.target),e.preventDefault();break}case"Home":{this.navigateToFirstItem(e.target),e.preventDefault();break}case"End":{this.navigateToLastItem(e.target),e.preventDefault();break}case"Space":case"Enter":{this.onItemClick(e,a,c,u),e.preventDefault();break}case"Tab":{this.onTabKey();break}}},navigateToNextItem:function(e){var a=this.findNextItem(e);a&&this.setFocusToMenuitem(e,a)},navigateToPrevItem:function(e){var a=this.findPrevItem(e);a&&this.setFocusToMenuitem(e,a)},navigateToFirstItem:function(e){var a=this.findFirstItem(e);a&&this.setFocusToMenuitem(e,a)},navigateToLastItem:function(e){var a=this.findLastItem(e);a&&this.setFocusToMenuitem(e,a)},findNextItem:function(e){var a=e.parentElement.nextElementSibling;return a?h.getAttribute(a,"data-p-disabled")===!0?this.findNextItem(a.children[0]):a.children[0]:null},findPrevItem:function(e){var a=e.parentElement.previousElementSibling;return a?h.getAttribute(a,"data-p-disabled")===!0?this.findPrevItem(a.children[0]):a.children[0]:null},findFirstItem:function(){var e=h.findSingle(this.$refs.nav,'[data-pc-section="menuitem"][data-p-disabled="false"]');return e?e.children[0]:null},findLastItem:function(){var e=h.find(this.$refs.nav,'[data-pc-section="menuitem"][data-p-disabled="false"]');return e?e[e.length-1].children[0]:null},findActiveItem:function(){var e=h.findSingle(this.$refs.nav,'[data-pc-section="menuitem"][data-p-disabled="false"][data-p-highlight="true"]');return e?e.children[0]:null},setFocusToMenuitem:function(e,a){e.tabIndex="-1",a.tabIndex="0",a.focus()},onTabKey:function(){var e=h.findSingle(this.$refs.nav,'[data-pc-section="menuitem"][data-p-disabled="false"][data-p-highlight="true"]'),a=h.findSingle(this.$refs.nav,'[data-pc-section="action"][tabindex="0"]');a!==e.children[0]&&(e&&(e.children[0].tabIndex="0"),a.tabIndex="-1")},visible:function(e){return typeof e.visible=="function"?e.visible():e.visible!==!1},disabled:function(e){return typeof e.disabled=="function"?e.disabled():e.disabled===!0},label:function(e){return typeof e.label=="function"?e.label():e.label},updateInkBar:function(){for(var e=this.$refs.nav.children,a=!1,c=0;c<e.length;c++){var u=e[c];h.getAttribute(u,"data-p-highlight")&&(this.$refs.inkbar.style.width=h.getWidth(u)+"px",this.$refs.inkbar.style.left=h.getOffset(u).left-h.getOffset(this.$refs.nav).left+"px",a=!0)}a||(this.$refs.inkbar.style.width="0px",this.$refs.inkbar.style.left="0px")}},directives:{ripple:ne}},Ie=["aria-labelledby","aria-label"],xe=["data-p-highlight","data-p-disabled"],_e=["href","aria-label","aria-disabled","onClick","onKeydown"],Te=["onClick","onKeydown","data-p-highlight","data-p-disabled"],we=["href","target","aria-label","aria-disabled"];function Pe(t,e,a,c,u,i){var I=se("router-link"),r=le("ripple");return s(),d("div",y({class:t.cx("root")},t.ptm("root"),{"data-pc-name":"tabmenu"}),[p("ul",y({ref:"nav",class:t.cx("menu"),role:"menubar","aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel},t.ptm("menu")),[(s(!0),d(E,null,re(t.model,function(n,o){return s(),d(E,{key:i.label(n)+"_"+o.toString()},[n.to&&!i.disabled(n)?(s(),v(I,{key:0,to:n.to,custom:""},{default:oe(function(m){var b=m.navigate,$=m.href,T=m.isActive,w=m.isExactActive;return[i.visible(n)?(s(),d("li",y({key:0,ref_for:!0,ref:"tab",class:[t.cx("menuitem",{item:n,isActive:T,isExactActive:w}),n.class],style:n.style,role:"presentation"},i.getPTOptions("menuitem",n,o),{"data-p-highlight":t.exact?w:T,"data-p-disabled":i.disabled(n)}),[t.$slots.item?(s(),v(S(t.$slots.item),{key:1,item:n,index:o},null,8,["item","index"])):K((s(),d("a",y({key:0,ref_for:!0,ref:"tabLink",role:"menuitem",href:$,class:t.cx("action"),"aria-label":i.label(n),"aria-disabled":i.disabled(n),tabindex:-1,onClick:function(x){return i.onItemClick(x,n,o,b)},onKeydown:function(x){return i.onKeydownItem(x,n,o,b)}},i.getPTOptions("action",n,o)),[t.$slots.itemicon?(s(),v(S(t.$slots.itemicon),{key:0,item:n,class:M([t.cx("icon"),n.icon])},null,8,["item","class"])):n.icon?(s(),d("span",y({key:1,class:[t.cx("icon"),n.icon]},i.getPTOptions("icon",n,o)),null,16)):g("",!0),p("span",y({class:t.cx("label")},i.getPTOptions("label",n,o)),P(i.label(n)),17)],16,_e)),[[r]])],16,xe)):g("",!0)]}),_:2},1032,["to"])):i.visible(n)?(s(),d("li",y({key:1,ref_for:!0,ref:"tab",class:[t.cx("menuitem",{item:n,index:o}),n.class],role:"presentation",onClick:function(b){return i.onItemClick(b,n,o)},onKeydown:function(b){return i.onKeydownItem(b,n,o)}},i.getPTOptions("menuitem",n,o),{"data-p-highlight":u.d_activeIndex===o,"data-p-disabled":i.disabled(n)}),[t.$slots.item?(s(),v(S(t.$slots.item),{key:1,item:n,index:o},null,8,["item","index"])):K((s(),d("a",y({key:0,ref_for:!0,ref:"tabLink",role:"menuitem",href:n.url,class:t.cx("action"),target:n.target,"aria-label":i.label(n),"aria-disabled":i.disabled(n),tabindex:-1},i.getPTOptions("action",n,o)),[t.$slots.itemicon?(s(),v(S(t.$slots.itemicon),{key:0,item:n,class:M([t.cx("icon"),n.icon])},null,8,["item","class"])):n.icon?(s(),d("span",y({key:1,class:[t.cx("icon"),n.icon]},i.getPTOptions("icon",n,o)),null,16)):g("",!0),p("span",y({class:t.cx("label")},i.getPTOptions("label",n,o)),P(i.label(n)),17)],16,we)),[[r]])],16,Te)):g("",!0)],64)}),128)),p("li",y({ref:"inkbar",role:"none",class:t.cx("inkbar")},t.ptm("inkbar")),null,16)],16,Ie)],16)}Y.render=Pe;const Ce=V({__name:"NsCopyToClipboard",props:{value:{type:String,required:!0}},setup(t){const e=t,{isSupported:a,copy:c}=ce({legacy:!0}),u=C("pi pi-copy"),i=async()=>{c(e.value),u.value="pi pi-check",setTimeout(()=>{u.value="pi pi-copy"},1e3)};return(I,r)=>k(a)?(s(),v(k(O),{key:0,class:"flex-shrink-0 w-2rem h-2rem",text:"",icon:u.value,onClick:i},null,8,["icon"])):g("",!0)}}),{currentUser:N}=j(),{subscribe:Ae}=X(),Se=C(),H=W({}),R=W({});function Fe(){J(()=>N.value.pubkey,async a=>{const c=[{kinds:[3],authors:[a]}],u=[];Ae(c,{id:"currentUserContact"+a.slice(0,10),relays:u},i=>{var I;i.created_at>(((I=Se.value)==null?void 0:I.created_at)??0)&&(H[a]=i.tags.filter(r=>r[0]==="p").map(r=>r[1]).filter(r=>r!==a)??[],R[a]=i.tags.filter(r=>r[0]==="t").map(r=>r[1])??[])})},{immediate:!0});const t=f(()=>H[N.value.pubkey]??[]),e=f(()=>R[N.value.pubkey]??[]);return{currentUser:N,followees:t,followedTags:e}}const Ne={class:"ns-profile-component"},$e={key:0},Be={key:1},Le={class:"white-box mb-4"},Oe={key:0,class:"banner-div"},De=["src"],Ee={key:1,class:"banner-div bg-blue-500"},Ke={class:"p-4 pt-0 relative"},Me={class:"flex justify-content-between"},Ue={class:"mt-7"},qe={class:"flex gap-1 align-items-center mb-2"},ze={class:"text-700"},He={class:"text-700 mb-4"},Re={key:0},Ve={key:0,class:"pt-4"},je={key:1,class:"description"},We={class:"feed-content"},Je=V({__name:"ProfileDisplayPage",props:{pubkey:{type:String,required:!0},feedType:{type:String,required:!0}},setup(t){const e=t,a=ue(),{currentUser:c}=j(),{followProfile:u,unfollowProfile:i}=X(),{followees:I}=Fe(),r=C(0);de(()=>{["feed","activity"].includes(e.feedType)?r.value=B.value.findIndex(l=>l.feedType===e.feedType):a.push({name:U.profile.display,params:{pubkey:e.pubkey,feedType:"feed"}})}),J(r,()=>{a.push({name:U.profile.display,params:{pubkey:e.pubkey,feedType:B.value[r.value].feedType}})});const n=f(()=>e.pubkey),{isLoading:o,author:m}=pe(n,{enabled:C(!0)}),b=f(()=>{var l;try{return JSON.parse(((l=m.value)==null?void 0:l.content)??"{}")}catch{return}}),$=f(()=>{var l;return((l=m.value)==null?void 0:l.schema.name)??n.value.slice(0,10)??""}),T=f(()=>{var l;return(l=b.value)==null?void 0:l.banner}),w=f(()=>{var l;return(l=b.value)==null?void 0:l.picture}),A=f(()=>{var l;return(l=m.value)==null?void 0:l.schema.description}),x=f(()=>{var l;return((l=m.value)==null?void 0:l.tags)??[]}),B=f(()=>[{feedType:"activity",label:"Activity",icon:"pi pi-fw pi-home"},{feedType:"feed",label:"Feed",icon:"pi pi-fw pi-home"}]),Z=f(()=>{var l;return n.value===((l=c.value)==null?void 0:l.pubkey)}),G=f(()=>I.value.includes(n.value)),_=C(!1),Q=async()=>{_.value=!0,await u(n.value),_.value=!1},ee=async()=>{_.value=!0,await i(n.value),_.value=!1};return(l,L)=>{var D;return s(),d("div",Ne,[k(o)?(s(),d("div",$e,[k(o)?(s(),v(k(q),{key:0,shape:"circle",size:"70px",class:"mr-3"})):g("",!0),k(o)?(s(),v(k(q),{key:1,width:"10rem",class:"mb-1"})):g("",!0)])):(s(),d("div",Be,[p("div",Le,[p("div",null,[T.value?(s(),d("div",Oe,[p("img",{src:T.value,alt:"Banner Image"},null,8,De)])):(s(),d("div",Ee))]),p("div",Ke,[w.value?(s(),v(fe,{key:0,style:{top:"-3.7rem"},src:w.value,alt:"Profile Image",class:"absolute border-circle w-7rem h-7rem border-white border-3 border-round",preview:""},null,8,["src"])):g("",!0),p("div",Me,[p("div",Ue,[F(z,{class:"text-900 font-medium block text-3xl mb-2",content:$.value,tags:x.value},null,8,["content","tags"]),p("div",qe,[p("div",ze,P(n.value.slice(0,10))+"..."+P(n.value.slice(-10)),1),F(Ce,{value:n.value},null,8,["value"])]),p("div",He,[(D=b.value)!=null&&D.nip05?(s(),d("span",Re,P(b.value.nip05),1)):g("",!0)])]),Z.value?g("",!0):(s(),d("div",Ve,[G.value?(s(),v(k(O),{key:0,onClick:ee,label:"Unfollow",icon:"pi pi-user-minus",severity:"secondary",loading:_.value,outlined:""},null,8,["loading"])):(s(),v(k(O),{key:1,onClick:Q,label:"Follow",icon:"pi pi-user-plus",severity:"secondary",loading:_.value,outlined:""},null,8,["loading"]))]))]),A.value?(s(),d("div",je,[F(z,{content:A.value,tags:x.value},null,8,["content","tags"])])):g("",!0)])]),p("div",We,[F(k(Y),{activeIndex:r.value,"onUpdate:activeIndex":L[0]||(L[0]=te=>r.value=te),model:B.value,class:"mb-4"},null,8,["activeIndex","model"]),(s(),v(me,{key:t.feedType,type:t.feedType,pubkey:n.value},null,8,["type","pubkey"]))])]))])}}});const Ze=ve(Je,[["__scopeId","data-v-98f8fd59"]]);export{Ze as default};
