import{z as Q,o,c,x as v,v as O,J as b,b as u,d as M,e as k,f as y,_ as N,H as f,w as I,M as W,q as h,ah as Ue,F as x,g as ne,V as R,K as P,r as L,af as Z,ag as le,h as q,l as K,G as E,m as dt,k as mt,ai as pt,aj as Fe,ak as pe,al as ve,B as fe,U,Z as Y,D,C as vt,E as Ke,am as ft,R as We,O as Ie,P as ae,I as J,T as Oe,S as Se,u as ht,s as be,A as G,N as yt,an as gt,ao as F,ap as X,Q as bt,aq as wt,ar as Ct,as as kt,at as _t,au as It,av as Ot,aw as St,ax as Pt,ay as $t}from"./index-f6fe6edb.js";import{a as B,O as Lt,s as Mt}from"./index.esm-75ec1c7e.js";import{u as Nt}from"./use-settings-ea8687c4.js";var Dt={root:"p-card p-component",header:"p-card-header",body:"p-card-body",title:"p-card-title",subtitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer"},xt={name:"BaseCard",extends:Q,css:{classes:Dt}},Pe={name:"Card",extends:xt};function At(e,t,n,i,r,a){return o(),c("div",v({class:e.cx("root")},e.ptm("root"),{"data-pc-name":"card"}),[e.$slots.header?(o(),c("div",v({key:0,class:e.cx("header")},e.ptm("header")),[O(e.$slots,"header")],16)):b("",!0),u("div",v({class:e.cx("body")},e.ptm("body")),[e.$slots.title?(o(),c("div",v({key:0,class:e.cx("title")},e.ptm("title")),[O(e.$slots,"title")],16)):b("",!0),e.$slots.subtitle?(o(),c("div",v({key:1,class:e.cx("subtitle")},e.ptm("subtitle")),[O(e.$slots,"subtitle")],16)):b("",!0),u("div",v({class:e.cx("content")},e.ptm("content")),[O(e.$slots,"content")],16),e.$slots.footer?(o(),c("div",v({key:2,class:e.cx("footer")},e.ptm("footer")),[O(e.$slots,"footer")],16)):b("",!0)],16)],16)}Pe.render=At;const Et={class:"ns-author-skeleton-component flex gap-2"},Tt=M({__name:"NsAuthorSkeleton",setup(e){return(t,n)=>(o(),c("div",Et,[k(y(B),{shape:"circle",size:"3rem"}),u("div",null,[k(y(B),{width:"10rem",height:"1rem",class:"mb-3 mt-1"}),k(y(B),{width:"5rem",height:".5rem"})])]))}}),Ze=N(Tt,[["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsAuthorSkeleton/NsAuthorSkeleton.vue"]]),jt={class:"p-3"},Bt={class:"flex justify-content-between"},Rt=M({__name:"NsNoteSkeleton",props:{inThread:Boolean},setup(e){return(t,n)=>(o(),f(y(Pe),{class:W({"white-box":!e.inThread})},{content:I(()=>[u("div",jt,[u("div",Bt,[k(Ze),k(y(B),{height:".5rem",width:"5rem"})]),k(y(B),{width:"100%",height:"10rem",class:"mt-3"})])]),_:1},8,["class"]))}}),qe=N(Rt,[["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsNoteSkeleton/NsNoteSkeleton.vue"]]),zt=["src","alt"],Vt=M({__name:"NsEmojiedContent",props:{content:{type:String,required:!0},tags:{type:Array,required:!0}},setup(e){const t=e,n=h(()=>Ue({content:t.content??"",tags:t.tags})),i=r=>r.type==="emoji";return(r,a)=>(o(),c("span",null,[(o(!0),c(x,null,ne(n.value,(s,l)=>(o(),c(x,{key:l},[i(s)?(o(),c("img",{key:0,src:s.value.url,alt:s.value.name,style:{height:"20px"}},null,8,zt)):(o(),c(x,{key:1},[R(P(s.raw),1)],64))],64))),128))]))}}),we=N(Vt,[["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsEmojiedContent/NsEmojiedContent.vue"]]),{fetchAuthor:Ht}=q();function $e(e,{enabled:t}){const n=L(!1),i=L();return Z(async()=>{if(t.value===!0){n.value=!0;const r=le(e.value);i.value=await Ht(r),n.value=!1}}),{isLoading:n,author:i}}const Ut={key:0},Ft={key:1},Kt={key:1,class:"cursor-pointer"},Wt={key:1,class:"flex align-items-start mr-0 lg:mr-5"},Zt=["src"],qt={class:"text-700 text-xs"},Xt=M({__name:"NsAuthor",props:{pubkey:{type:String,required:!0},inline:Boolean,loading:Boolean},setup(e){const t=e,n=h(()=>t.pubkey),{isLoading:i,author:r}=$e(n,{enabled:L(!0)}),a=h(()=>{var g;try{return JSON.parse(((g=r.value)==null?void 0:g.content)??"{}")}catch(C){console.error(C);return}}),s=h(()=>{var g;return(g=r.value)==null?void 0:g.schema}),l=h(()=>{var g;return((g=s.value)==null?void 0:g.name)||t.pubkey.slice(0,10)}),d=h(()=>{var g;return((g=a.value)==null?void 0:g.nip05)||t.pubkey.slice(0,10)}),p=h(()=>({name:K.profile.display,params:{pubkey:t.pubkey,feedType:"activity"}}));return(g,C)=>{const S=E("router-link");return o(),f(S,{to:p.value},{default:I(()=>{var m,_;return[e.inline?(o(),c("span",Ut,[y(i)?(o(),f(y(B),{key:0,height:"1rem",width:"10rem",class:"inline-block"})):(o(),f(S,{key:1,to:p.value},{default:I(()=>[y(r)?(o(),f(we,{key:0,content:`@${l.value}`,tags:y(r).tags},null,8,["content","tags"])):(o(),c("span",Ft,"@"+P(l.value),1))]),_:1},8,["to"]))])):(o(),c("div",Kt,[y(i)?(o(),f(Ze,{key:0})):b("v-if",!0),y(r)?(o(),c("div",Wt,[(m=s.value)!=null&&m.image?(o(),c("img",{key:0,src:(_=s.value)==null?void 0:_.image,class:"border-circle mr-3 w-3rem h-3rem"},null,8,Zt)):b("v-if",!0),u("div",null,[k(we,{class:"text-900 font-medium block mb-2",content:l.value,tags:y(r).tags},null,8,["content","tags"]),u("div",qt,P(d.value),1)])])):b("v-if",!0)]))]}),_:1},8,["to"])}}}),ue=N(Xt,[["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsAuthor/NsAuthor.vue"]]),Xe=e=>(pe("data-v-98455f12"),e=e(),ve(),e),Yt={class:"flex align-items-center gap-2 text-primary"},Jt=Xe(()=>u("i",{class:"pi pi-chevron-down"},null,-1)),Qt={class:"flex align-items-center gap-2 text-primary"},Gt=Xe(()=>u("i",{class:"pi pi-chevron-up"},null,-1)),en=40,tn=20,nn=M({__name:"NsCollapsible",props:dt({maxHeight:{type:Number,default:110},openLabel:{type:String,default:"more"},closeLabel:{type:String,default:"hide"}},{modelValue:{type:Boolean,default:()=>!0,local:!0}}),emits:["update:modelValue"],setup(e){const t=e,n=mt(e,"modelValue",{local:!0}),i=L(null),r=L(!0),a=L(0);pt(i,l=>{const d=l[0],{height:p}=d.contentRect;r.value=p>t.maxHeight,a.value=p+en});const s=h(()=>r.value?n.value?`${t.maxHeight+tn+10}px`:`${a.value+10}px`:"auto");return(l,d)=>(o(),c("div",{class:W(["ns-collapsible-component",{"pb-3":r.value}]),style:Fe({height:s.value})},[u("div",{ref_key:"slotRef",ref:i},[O(l.$slots,"default",{},void 0,!0)],512),r.value&&n.value?(o(),c("div",{key:0,class:"ns-collapsible-gradient-overlay ns-collapsible-gradient-overlay-closed align-items-end",onClick:d[0]||(d[0]=p=>n.value=!n.value),onKeydown:d[1]||(d[1]=p=>n.value=!n.value)},[u("div",Yt,[Jt,R(" "+P(e.openLabel),1)])],32)):b("v-if",!0),r.value&&!n.value?(o(),c("div",{key:1,class:"ns-collapsible-gradient-overlay ns-collapsible-gradient-overlay-open align-items-end",onClick:d[2]||(d[2]=p=>n.value=!n.value),onKeydown:d[3]||(d[3]=p=>n.value=!n.value)},[u("div",Qt,[Gt,R(" "+P(e.closeLabel),1)])],32)):b("v-if",!0)],6))}});const an=N(nn,[["__scopeId","data-v-98455f12"],["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsCollapsible/NsCollapsible.vue"]]);var rn=`
.p-menu ul {
    margin: 0;
    padding: 0;
    list-style: none;
}

.p-menu .p-menuitem-link {
    cursor: pointer;
    display: flex;
    align-items: center;
    text-decoration: none;
    overflow: hidden;
    position: relative;
}

.p-menu .p-menuitem-text {
    line-height: 1;
}
`,on={root:function(t){var n=t.instance,i=t.props;return["p-menu p-component",{"p-menu-overlay":i.popup,"p-input-filled":n.$primevue.config.inputStyle==="filled","p-ripple-disabled":n.$primevue.config.ripple===!1}]},start:"p-menu-start",menu:"p-menu-list p-reset",submenuHeader:"p-submenu-header",separator:"p-menuitem-separator",end:"p-menu-end",menuitem:function(t){var n=t.instance;return["p-menuitem",{"p-focus":n.id===n.focusedOptionId,"p-disabled":n.disabled()}]},content:"p-menuitem-content",action:function(t){var n=t.props,i=t.isActive,r=t.isExactActive;return["p-menuitem-link",{"router-link-active":i,"router-link-active-exact":n.exact&&r}]},icon:"p-menuitem-icon",label:"p-menuitem-text"},sn=fe(rn,{name:"menu",manual:!0}),ln=sn.load,un={name:"BaseMenu",extends:Q,props:{popup:{type:Boolean,default:!1},model:{type:Array,default:null},appendTo:{type:String,default:"body"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},exact:{type:Boolean,default:!0},tabindex:{type:Number,default:0},"aria-label":{type:String,default:null},"aria-labelledby":{type:String,default:null}},css:{classes:on,loadStyle:ln},provide:function(){return{$parentInstance:this}}},Ye={name:"Menuitem",hostName:"Menu",extends:Q,inheritAttrs:!1,emits:["item-click"],props:{item:null,templates:null,exact:null,id:null,focusedOptionId:null,index:null},methods:{getItemProp:function(t,n){return t&&t.item?ft.getItemValue(t.item[n]):void 0},getPTOptions:function(t){return this.ptm(t,{context:{item:this.item,index:this.index,focused:this.isItemFocused()}})},isItemFocused:function(){return this.focusedOptionId===this.id},onItemActionClick:function(t,n){n&&n(t)},onItemClick:function(t){var n=this.getItemProp(this.item,"command");n&&n({originalEvent:t,item:this.item.item}),this.$emit("item-click",{originalEvent:t,item:this.item,id:this.id})},visible:function(){return typeof this.item.visible=="function"?this.item.visible():this.item.visible!==!1},disabled:function(){return typeof this.item.disabled=="function"?this.item.disabled():this.item.disabled},label:function(){return typeof this.item.label=="function"?this.item.label():this.item.label}},directives:{ripple:We}},cn=["id","aria-label","aria-disabled","data-p-focused","data-p-disabled"],dn=["href","onClick"],mn=["href","target"];function pn(e,t,n,i,r,a){var s=E("router-link"),l=Ie("ripple");return a.visible()?(o(),c("li",v({key:0,id:n.id,class:[e.cx("menuitem"),n.item.class],role:"menuitem",style:n.item.style,"aria-label":a.label(),"aria-disabled":a.disabled()},a.getPTOptions("menuitem"),{"data-p-focused":a.isItemFocused(),"data-p-disabled":a.disabled()||!1}),[u("div",v({class:e.cx("content"),onClick:t[0]||(t[0]=function(d){return a.onItemClick(d)})},a.getPTOptions("content")),[n.templates.item?(o(),f(J(n.templates.item),{key:1,item:n.item},null,8,["item"])):(o(),c(x,{key:0},[n.item.to&&!a.disabled()?(o(),f(s,{key:0,to:n.item.to,custom:""},{default:I(function(d){var p=d.navigate,g=d.href,C=d.isActive,S=d.isExactActive;return[ae((o(),c("a",v({href:g,class:e.cx("action",{isActive:C,isExactActive:S}),tabindex:"-1","aria-hidden":"true",onClick:function(_){return a.onItemActionClick(_,p)}},a.getPTOptions("action")),[n.templates.itemicon?(o(),f(J(n.templates.itemicon),{key:0,item:n.item,class:W([e.cx("icon"),n.item.icon])},null,8,["item","class"])):n.item.icon?(o(),c("span",v({key:1,class:[e.cx("icon"),n.item.icon]},a.getPTOptions("icon")),null,16)):b("",!0),u("span",v({class:e.cx("label")},a.getPTOptions("label")),P(a.label()),17)],16,dn)),[[l]])]}),_:1},8,["to"])):ae((o(),c("a",v({key:1,href:n.item.url,class:e.cx("action"),target:n.item.target,tabindex:"-1","aria-hidden":"true"},a.getPTOptions("action")),[n.templates.itemicon?(o(),f(J(n.templates.itemicon),{key:0,item:n.item,class:W([e.cx("icon"),n.item.icon])},null,8,["item","class"])):n.item.icon?(o(),c("span",v({key:1,class:[e.cx("icon"),n.item.icon]},a.getPTOptions("icon")),null,16)):b("",!0),u("span",v({class:e.cx("label")},a.getPTOptions("label")),P(a.label()),17)],16,mn)),[[l]])],64))],16)],16,cn)):b("",!0)}Ye.render=pn;function Ae(e){return yn(e)||hn(e)||fn(e)||vn()}function vn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fn(e,t){if(e){if(typeof e=="string")return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(e,t)}}function hn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yn(e){if(Array.isArray(e))return Ce(e)}function Ce(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ke={name:"Menu",extends:un,inheritAttrs:!1,emits:["show","hide","focus","blur"],data:function(){return{id:this.$attrs.id,overlayVisible:!1,focused:!1,focusedOptionIndex:-1,selectedOptionIndex:-1}},watch:{"$attrs.id":function(t){this.id=t||U()}},target:null,outsideClickListener:null,scrollHandler:null,resizeListener:null,container:null,list:null,mounted:function(){this.id=this.id||U(),this.popup||(this.bindResizeListener(),this.bindOutsideClickListener())},beforeUnmount:function(){this.unbindResizeListener(),this.unbindOutsideClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.target=null,this.container&&this.autoZIndex&&Y.clear(this.container),this.container=null},methods:{itemClick:function(t){var n=t.item;this.disabled(n)||(n.command&&n.command(t),n.to&&t.navigate&&t.navigate(t.originalEvent),this.overlayVisible&&this.hide(),!this.popup&&this.focusedOptionIndex!==t.id&&(this.focusedOptionIndex=t.id))},onListFocus:function(t){this.focused=!0,this.popup||(this.selectedOptionIndex!==-1?(this.changeFocusedOptionIndex(this.selectedOptionIndex),this.selectedOptionIndex=-1):this.changeFocusedOptionIndex(0)),this.$emit("focus",t)},onListBlur:function(t){this.focused=!1,this.focusedOptionIndex=-1,this.$emit("blur",t)},onListKeyDown:function(t){switch(t.code){case"ArrowDown":this.onArrowDownKey(t);break;case"ArrowUp":this.onArrowUpKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"Enter":this.onEnterKey(t);break;case"Space":this.onSpaceKey(t);break;case"Escape":this.popup&&(D.focus(this.target),this.hide());case"Tab":this.overlayVisible&&this.hide();break}},onArrowDownKey:function(t){var n=this.findNextOptionIndex(this.focusedOptionIndex);this.changeFocusedOptionIndex(n),t.preventDefault()},onArrowUpKey:function(t){if(t.altKey&&this.popup)D.focus(this.target),this.hide(),t.preventDefault();else{var n=this.findPrevOptionIndex(this.focusedOptionIndex);this.changeFocusedOptionIndex(n),t.preventDefault()}},onHomeKey:function(t){this.changeFocusedOptionIndex(0),t.preventDefault()},onEndKey:function(t){this.changeFocusedOptionIndex(D.find(this.container,'li[data-pc-section="menuitem"][data-p-disabled="false"]').length-1),t.preventDefault()},onEnterKey:function(t){var n=D.findSingle(this.list,'li[id="'.concat("".concat(this.focusedOptionIndex),'"]')),i=n&&D.findSingle(n,'a[data-pc-section="action"]');this.popup&&D.focus(this.target),i?i.click():n&&n.click(),t.preventDefault()},onSpaceKey:function(t){this.onEnterKey(t)},findNextOptionIndex:function(t){var n=D.find(this.container,'li[data-pc-section="menuitem"][data-p-disabled="false"]'),i=Ae(n).findIndex(function(r){return r.id===t});return i>-1?i+1:0},findPrevOptionIndex:function(t){var n=D.find(this.container,'li[data-pc-section="menuitem"][data-p-disabled="false"]'),i=Ae(n).findIndex(function(r){return r.id===t});return i>-1?i-1:0},changeFocusedOptionIndex:function(t){var n=D.find(this.container,'li[data-pc-section="menuitem"][data-p-disabled="false"]'),i=t>=n.length?n.length-1:t<0?0:t;i>-1&&(this.focusedOptionIndex=n[i].getAttribute("id"))},toggle:function(t){this.overlayVisible?this.hide():this.show(t)},show:function(t){this.overlayVisible=!0,this.target=t.currentTarget},hide:function(){this.overlayVisible=!1,this.target=null},onEnter:function(t){D.addStyles(t,{position:"absolute",top:"0",left:"0"}),this.alignOverlay(),this.bindOutsideClickListener(),this.bindResizeListener(),this.bindScrollListener(),this.autoZIndex&&Y.set("menu",t,this.baseZIndex+this.$primevue.config.zIndex.menu),this.popup&&(D.focus(this.list),this.changeFocusedOptionIndex(0)),this.$emit("show")},onLeave:function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindScrollListener(),this.$emit("hide")},onAfterLeave:function(t){this.autoZIndex&&Y.clear(t)},alignOverlay:function(){D.absolutePosition(this.container,this.target),this.container.style.minWidth=D.getOuterWidth(this.target)+"px"},bindOutsideClickListener:function(){var t=this;this.outsideClickListener||(this.outsideClickListener=function(n){var i=t.container&&!t.container.contains(n.target),r=!(t.target&&(t.target===n.target||t.target.contains(n.target)));t.overlayVisible&&i&&r?t.hide():!t.popup&&i&&r&&(t.focusedOptionIndex=-1)},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener:function(){var t=this;this.scrollHandler||(this.scrollHandler=new vt(this.target,function(){t.overlayVisible&&t.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var t=this;this.resizeListener||(this.resizeListener=function(){t.overlayVisible&&!D.isTouchDevice()&&t.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},visible:function(t){return typeof t.visible=="function"?t.visible():t.visible!==!1},disabled:function(t){return typeof t.disabled=="function"?t.disabled():t.disabled},label:function(t){return typeof t.label=="function"?t.label():t.label},onOverlayClick:function(t){Lt.emit("overlay-click",{originalEvent:t,target:this.target})},containerRef:function(t){this.container=t},listRef:function(t){this.list=t}},computed:{focusedOptionId:function(){return this.focusedOptionIndex!==-1?this.focusedOptionIndex:null}},components:{PVMenuitem:Ye,Portal:Ke}};function ie(e){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(e)}function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ee(Object(n),!0).forEach(function(i){gn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function gn(e,t,n){return t=bn(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bn(e){var t=wn(e,"string");return ie(t)==="symbol"?t:String(t)}function wn(e,t){if(ie(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(ie(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cn=["id"],kn=["id","tabindex","aria-activedescendant","aria-label","aria-labelledby"],_n=["id"];function In(e,t,n,i,r,a){var s=E("PVMenuitem"),l=E("Portal");return o(),f(l,{appendTo:e.appendTo,disabled:!e.popup},{default:I(function(){return[k(Oe,v({name:"p-connected-overlay",onEnter:a.onEnter,onLeave:a.onLeave,onAfterLeave:a.onAfterLeave},e.ptm("transition")),{default:I(function(){return[!e.popup||r.overlayVisible?(o(),c("div",v({key:0,ref:a.containerRef,id:r.id,class:e.cx("root"),onClick:t[3]||(t[3]=function(){return a.onOverlayClick&&a.onOverlayClick.apply(a,arguments)})},Te(Te({},e.$attrs),e.ptm("root")),{"data-pc-name":"menu"}),[e.$slots.start?(o(),c("div",v({key:0,class:e.cx("start")},e.ptm("start")),[O(e.$slots,"start")],16)):b("",!0),u("ul",v({ref:a.listRef,id:r.id+"_list",class:e.cx("menu"),role:"menu",tabindex:e.tabindex,"aria-activedescendant":r.focused?a.focusedOptionId:void 0,"aria-label":e.ariaLabel,"aria-labelledby":e.ariaLabelledby,onFocus:t[0]||(t[0]=function(){return a.onListFocus&&a.onListFocus.apply(a,arguments)}),onBlur:t[1]||(t[1]=function(){return a.onListBlur&&a.onListBlur.apply(a,arguments)}),onKeydown:t[2]||(t[2]=function(){return a.onListKeyDown&&a.onListKeyDown.apply(a,arguments)})},e.ptm("menu")),[(o(!0),c(x,null,ne(e.model,function(d,p){return o(),c(x,{key:a.label(d)+p.toString()},[d.items&&a.visible(d)&&!d.separator?(o(),c(x,{key:0},[d.items?(o(),c("li",v({key:0,id:r.id+"_"+p,class:e.cx("submenuHeader"),role:"none"},e.ptm("submenuHeader")),[O(e.$slots,"item",{item:d},function(){return[R(P(a.label(d)),1)]})],16,_n)):b("",!0),(o(!0),c(x,null,ne(d.items,function(g,C){return o(),c(x,{key:g.label+p+"_"+C},[a.visible(g)&&!g.separator?(o(),f(s,{key:0,id:r.id+"_"+p+"_"+C,item:g,templates:e.$slots,exact:e.exact,focusedOptionId:a.focusedOptionId,onItemClick:a.itemClick,pt:e.pt},null,8,["id","item","templates","exact","focusedOptionId","onItemClick","pt"])):a.visible(g)&&g.separator?(o(),c("li",v({key:"separator"+p+C,class:[e.cx("separator"),d.class],style:g.style,role:"separator"},e.ptm("separator")),null,16)):b("",!0)],64)}),128))],64)):a.visible(d)&&d.separator?(o(),c("li",v({key:"separator"+p.toString(),class:[e.cx("separator"),d.class],style:d.style,role:"separator"},e.ptm("separator")),null,16)):(o(),f(s,{key:a.label(d)+p.toString(),id:r.id+"_"+p,item:d,index:p,templates:e.$slots,exact:e.exact,focusedOptionId:a.focusedOptionId,onItemClick:a.itemClick,pt:e.pt},null,8,["id","item","index","templates","exact","focusedOptionId","onItemClick","pt"]))],64)}),128))],16,kn),e.$slots.end?(o(),c("div",v({key:1,class:e.cx("end")},e.ptm("end")),[O(e.$slots,"end")],16)):b("",!0)],16,Cn)):b("",!0)]}),_:3},16,["onEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo","disabled"])}ke.render=In;function _e(e){"@babel/helpers - typeof";return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(e)}function z(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function A(e){z(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||_e(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var On={};function Sn(){return On}function je(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function me(e,t){z(2,arguments);var n=A(e),i=A(t),r=n.getTime()-i.getTime();return r<0?-1:r>0?1:r}function Pn(e,t){z(2,arguments);var n=A(e),i=A(t),r=n.getFullYear()-i.getFullYear(),a=n.getMonth()-i.getMonth();return r*12+a}function $n(e,t){return z(2,arguments),A(e).getTime()-A(t).getTime()}var Be={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},Ln="trunc";function Mn(e){return e?Be[e]:Be[Ln]}function Nn(e){z(1,arguments);var t=A(e);return t.setHours(23,59,59,999),t}function Dn(e){z(1,arguments);var t=A(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function xn(e){z(1,arguments);var t=A(e);return Nn(t).getTime()===Dn(t).getTime()}function An(e,t){z(2,arguments);var n=A(e),i=A(t),r=me(n,i),a=Math.abs(Pn(n,i)),s;if(a<1)s=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-r*a);var l=me(n,i)===-r;xn(A(e))&&a===1&&me(e,i)===1&&(l=!1),s=r*(a-Number(l))}return s===0?0:s}function En(e,t,n){z(2,arguments);var i=$n(e,t)/1e3;return Mn(n==null?void 0:n.roundingMethod)(i)}var Tn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jn=function(t,n,i){var r,a=Tn[t];return typeof a=="string"?r=a:n===1?r=a.one:r=a.other.replace("{{count}}",n.toString()),i!=null&&i.addSuffix?i.comparison&&i.comparison>0?"in "+r:r+" ago":r};const Bn=jn;function ye(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,i=e.formats[n]||e.formats[e.defaultWidth];return i}}var Rn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},zn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Vn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Hn={date:ye({formats:Rn,defaultWidth:"full"}),time:ye({formats:zn,defaultWidth:"full"}),dateTime:ye({formats:Vn,defaultWidth:"full"})};const Un=Hn;var Fn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Kn=function(t,n,i,r){return Fn[t]};const Wn=Kn;function ee(e){return function(t,n){var i=n!=null&&n.context?String(n.context):"standalone",r;if(i==="formatting"&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):a;r=e.formattingValues[s]||e.formattingValues[a]}else{var l=e.defaultWidth,d=n!=null&&n.width?String(n.width):e.defaultWidth;r=e.values[d]||e.values[l]}var p=e.argumentCallback?e.argumentCallback(t):t;return r[p]}}var Zn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Xn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Yn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Jn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Qn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Gn=function(t,n){var i=Number(t),r=i%100;if(r>20||r<10)switch(r%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},ea={ordinalNumber:Gn,era:ee({values:Zn,defaultWidth:"wide"}),quarter:ee({values:qn,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:ee({values:Xn,defaultWidth:"wide"}),day:ee({values:Yn,defaultWidth:"wide"}),dayPeriod:ee({values:Jn,defaultWidth:"wide",formattingValues:Qn,defaultFormattingWidth:"wide"})};const ta=ea;function te(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.width,r=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],a=t.match(r);if(!a)return null;var s=a[0],l=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(l)?aa(l,function(C){return C.test(s)}):na(l,function(C){return C.test(s)}),p;p=e.valueCallback?e.valueCallback(d):d,p=n.valueCallback?n.valueCallback(p):p;var g=t.slice(s.length);return{value:p,rest:g}}}function na(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function aa(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function ia(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.match(e.matchPattern);if(!i)return null;var r=i[0],a=t.match(e.parsePattern);if(!a)return null;var s=e.valueCallback?e.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;var l=t.slice(r.length);return{value:s,rest:l}}}var ra=/^(\d+)(th|st|nd|rd)?/i,oa=/\d+/i,sa={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},la={any:[/^b/i,/^(a|c)/i]},ua={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ca={any:[/1/i,/2/i,/3/i,/4/i]},da={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ma={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pa={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},va={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fa={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ha={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ya={ordinalNumber:ia({matchPattern:ra,parsePattern:oa,valueCallback:function(t){return parseInt(t,10)}}),era:te({matchPatterns:sa,defaultMatchWidth:"wide",parsePatterns:la,defaultParseWidth:"any"}),quarter:te({matchPatterns:ua,defaultMatchWidth:"wide",parsePatterns:ca,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:te({matchPatterns:da,defaultMatchWidth:"wide",parsePatterns:ma,defaultParseWidth:"any"}),day:te({matchPatterns:pa,defaultMatchWidth:"wide",parsePatterns:va,defaultParseWidth:"any"}),dayPeriod:te({matchPatterns:fa,defaultMatchWidth:"any",parsePatterns:ha,defaultParseWidth:"any"})};const ga=ya;var ba={code:"en-US",formatDistance:Bn,formatLong:Un,formatRelative:Wn,localize:ta,match:ga,options:{weekStartsOn:0,firstWeekContainsDate:1}};const wa=ba;function Je(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function Ca(e){return Je({},e)}var Re=1440,ka=2520,ge=43200,_a=86400;function Ia(e,t,n){var i,r;z(2,arguments);var a=Sn(),s=(i=(r=n==null?void 0:n.locale)!==null&&r!==void 0?r:a.locale)!==null&&i!==void 0?i:wa;if(!s.formatDistance)throw new RangeError("locale must contain formatDistance property");var l=me(e,t);if(isNaN(l))throw new RangeError("Invalid time value");var d=Je(Ca(n),{addSuffix:!!(n!=null&&n.addSuffix),comparison:l}),p,g;l>0?(p=A(t),g=A(e)):(p=A(e),g=A(t));var C=En(g,p),S=(je(g)-je(p))/1e3,m=Math.round((C-S)/60),_;if(m<2)return n!=null&&n.includeSeconds?C<5?s.formatDistance("lessThanXSeconds",5,d):C<10?s.formatDistance("lessThanXSeconds",10,d):C<20?s.formatDistance("lessThanXSeconds",20,d):C<40?s.formatDistance("halfAMinute",0,d):C<60?s.formatDistance("lessThanXMinutes",1,d):s.formatDistance("xMinutes",1,d):m===0?s.formatDistance("lessThanXMinutes",1,d):s.formatDistance("xMinutes",m,d);if(m<45)return s.formatDistance("xMinutes",m,d);if(m<90)return s.formatDistance("aboutXHours",1,d);if(m<Re){var w=Math.round(m/60);return s.formatDistance("aboutXHours",w,d)}else{if(m<ka)return s.formatDistance("xDays",1,d);if(m<ge){var T=Math.round(m/Re);return s.formatDistance("xDays",T,d)}else if(m<_a)return _=Math.round(m/ge),s.formatDistance("aboutXMonths",_,d)}if(_=An(g,p),_<12){var $=Math.round(m/ge);return s.formatDistance("xMonths",$,d)}else{var V=_%12,H=Math.floor(_/12);return V<3?s.formatDistance("aboutXYears",H,d):V<9?s.formatDistance("overXYears",H,d):s.formatDistance("almostXYears",H+1,d)}}function Oa(){return{prettifyRelative:t=>Ia(t*1e3,new Date)}}const{fetchEventReposts:Sa}=q();function Pa(e,{enabled:t}){const n=le(e),i=L(!1),r=L([]),a=Se();return Z(async()=>{i.value=!0,r.value=await a.events.find({selector:{"schema.@type":"ShareAction","schema.object.@id":n}}).exec(),t.value===!0&&(r.value=await Sa(n)),i.value=!1}),{isLoading:i,reposts:r}}const{fetchEventComments:$a}=q();function La(e,{enabled:t}){const n=le(e),i=L(!1),r=L([]),a=Se();return Z(async()=>{i.value=!0,r.value=await a.events.find({selector:{"schema.@type":"Comment","schema.parentItem.@id":n}}).exec(),t.value===!0&&(r.value=await $a(n)),i.value=!1}),{isLoading:i,comments:r}}const{fetchEventZaps:Ma}=q();function Na(e,{enabled:t}){const n=le(e.value.id),i=L(!1),r=L([]),a=Se(),s=e.value.schema["@type"]==="Person";return Z(async()=>{let l={"schema.@type":"Invoice"};s?l={...l,"schema.provider.@id":n}:l={...l,"schema.mainEntityOfPage.@id":n},i.value=!0,r.value=await a.events.find({selector:l}).exec(),t.value===!0&&(r.value=await Ma(s?e.value.pubkey:n,{isProfileEvent:s})),i.value=!1}),{isLoading:i,zaps:r}}const Le=e=>(pe("data-v-7b6ad372"),e=e(),ve(),e),Da={class:"flex justify-content-between gap-2 pb-0"},xa={class:"flex"},Aa={class:"block text-500 min-w-max font-medium text-sm mt-3"},Ea={class:"ml-1"},Ta={class:"p-3"},ja={key:0,class:"flex align-items-center justify-content-between border-bottom-1 surface-border"},Ba={key:0,class:"flex align-items-center gap-4 px-3"},Ra=Le(()=>u("i",{class:"pi pi-comments mr-2"},null,-1)),za={key:1},Va=Le(()=>u("i",{class:"pi pi-sync mr-2"},null,-1)),Ha={key:1},Ua=Le(()=>u("i",{class:"pi pi-bolt mr-2"},null,-1)),Fa={key:1},Ka={class:"mr-1"},Wa={key:1,class:"metadata-details p-2 inset-shadow-1"},Za=M({__name:"NsThing",props:{event:{type:Object,required:!0},inline:Boolean,inThread:Boolean},setup(e){const t=e,n=ht(),i=h(()=>!t.inline&&!t.inThread),r=h(()=>t.event.id),a=h(()=>t.event),{isLoading:s,comments:l}=La(r,{enabled:i}),{isLoading:d,reposts:p}=Pa(r,{enabled:i}),{isLoading:g,zaps:C}=Na(a,{enabled:i}),{prettifyRelative:S}=Oa(),m=L(!1),_=L(),w=j=>{_.value.toggle(j)},T=h(()=>[{label:"Author profile",icon:"pi pi-user",command:()=>{const j=n.resolve({name:K.profile.display,params:{pubkey:t.event.pubkey,feedType:"activity"}});window.open(j.href,"_blank")}},{label:"Open link",icon:"pi pi-user",command:()=>{const j=n.resolve({name:K.events.display,params:{id:t.event.id}});window.open(j.href,"_blank")}},{label:"Mute author",icon:"pi pi-user-minus",class:"danger",command:()=>{}},{label:m.value?"Hide details":"Details",icon:"pi pi-info-circle",command:()=>{m.value=!m.value}}]),$=L(),V=j=>{$.value.toggle(j)},H=h(()=>[{label:m.value?"Hide details":"Details",icon:"pi pi-info-circle",command:()=>{m.value=!m.value}}]);return(j,co)=>{const ct=E("router-link");return o(),f(y(Pe),{class:W(["ns-thing-component",{"white-box":!e.inThread,"in-thread":e.inThread}])},{header:I(()=>[O(j.$slots,"header",{},void 0,!0)]),content:I(()=>[u("div",Da,[k(ue,{class:"p-3 truncate",pubkey:a.value.pubkey},null,8,["pubkey"]),u("div",xa,[u("div",Aa,P(y(S)(a.value.created_at)),1),u("div",Ea,[k(y(be),{icon:"pi pi-ellipsis-v",class:"pt-3 px-1",text:"",onClick:w,"aria-haspopup":"true","aria-controls":"overlay_menu"}),k(y(ke),{ref_key:"optionsMenuRef",ref:_,id:"overlay_menu",model:T.value,popup:!0},null,8,["model"])])])]),O(j.$slots,"content-header",{},void 0,!0),u("div",Ta,[k(an,{"max-height":240},{default:I(()=>[O(j.$slots,"default",{},void 0,!0)]),_:3})]),O(j.$slots,"content-footer",{},void 0,!0)]),footer:I(()=>{var Ne,De;return[e.inline?b("v-if",!0):(o(),c("div",ja,[u("div",null,[e.inThread?b("v-if",!0):(o(),c("div",Ba,[k(ct,{to:{name:y(K).events.display,params:{id:a.value.id}}},{default:I(()=>{var xe;return[Ra,y(s)?(o(),f(y(B),{key:0,class:"inline-block",width:"1rem"})):(o(),c("span",za,P((xe=y(l))==null?void 0:xe.length),1))]}),_:1},8,["to"]),u("div",null,[Va,y(d)?(o(),f(y(B),{key:0,class:"inline-block",width:"1rem"})):(o(),c("span",Ha,P((Ne=y(p))==null?void 0:Ne.length),1))]),u("div",null,[Ua,y(g)?(o(),f(y(B),{key:0,class:"inline-block",width:"1rem"})):(o(),c("span",Fa,P((De=y(C))==null?void 0:De.length),1))])]))]),u("div",Ka,[k(y(be),{icon:"pi pi-cog",class:"px-2 text-color-secondary",text:"",onClick:V,"aria-haspopup":"true","aria-controls":"overlay_menu"}),k(y(ke),{ref_key:"settingsMenuRef",ref:$,id:"overlay_menu",model:H.value,popup:!0},null,8,["model"])])])),m.value?(o(),c("div",Wa,[u("pre",null,P(a.value),1)])):b("v-if",!0)]}),_:3},8,["class"])}}});const ce=N(Za,[["__scopeId","data-v-7b6ad372"],["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsThing/NsThing.vue"]]),qa={class:"ns-profile-component"},Xa=M({__name:"NsProfile",props:{event:{type:Object},pubkey:{type:String}},setup(e){const t=e,n=h(()=>{var l;return((l=t.event)==null?void 0:l.id)??t.pubkey}),i=h(()=>!!t.pubkey&&!t.event),{isLoading:r,author:a}=$e(n,{enabled:i}),s=h(()=>t.event??a.value);return(l,d)=>(o(),c("div",qa,[y(r)?(o(),f(qe,{key:0})):b("v-if",!0),s.value?(o(),f(ce,{key:1,class:"ns-profile-component",event:s.value},{default:I(()=>[k(we,{content:s.value.schema.description||"",tags:s.value.tags},null,8,["content","tags"])]),_:1},8,["event"])):b("v-if",!0)]))}}),Qe=N(Xa,[["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsProfile/NsProfile.vue"]]),{fetchEvent:Ya}=q();function Ge(e,{enabled:t}){const n=L(!1),i=L();return Z(async()=>{if(t.value===!0){n.value=!0;const r=le(e.value);i.value=await Ya(r),n.value=!1}}),{isLoading:n,event:i}}const Ja={key:1,class:"ns-message-recipient"},Qa=M({__name:"NsMessageRecipient",props:{event:{type:Object},id:{type:String}},setup(e){const t=e,n=h(()=>{var S;return((S=t.event)==null?void 0:S.id)||t.id}),i=h(()=>!!t.id&&!t.event),{isLoading:r,event:a}=Ge(n,{enabled:i}),s=h(()=>{var S,m;return((S=t.event)==null?void 0:S.pubkey)??((m=a.value)==null?void 0:m.pubkey)??""}),l=h(()=>!!s.value),{isLoading:d,author:p}=$e(s,{enabled:l}),g=h(()=>r.value||d.value),C=h(()=>{var S;return((S=p.value)==null?void 0:S.schema.name)||s.value.slice(0,10)||"????"});return(S,m)=>g.value?(o(),f(y(B),{key:0,class:"inline-block",height:"0.5rem",width:"7rem"})):(o(),c("span",Ja,"@"+P(C.value),1))}}),Ga=N(Qa,[["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsComment/components/NsMessageRecipient/NsMessageRecipient.vue"]]),ei={class:"ns-comment-controller text-color-secondary text-sm"},ti={key:0},ni={key:1,class:"mx-1"},ai={key:2},ii=M({__name:"NsCommentController",props:{event:{type:Object,required:!0}},setup(e){const t=e,{fetch:n}=q(),i=L(!1),r=L(),a=L(),s=L();return Z(async()=>{var l,d,p,g;if(i.value=!0,s.value=(l=t.event.schema.mainEntity)==null?void 0:l["@id"],r.value=(d=t.event.schema.parentItem)==null?void 0:d["@id"],t.event.schema.isPartOf&&(s.value==null||r.value==null)){const C=t.event.tags.filter(_=>_[0]==="e"),S=C.map(_=>_[2]).filter(Boolean),m=await n([{kinds:[1],ids:C.map(_=>_[1])}],{batchId:"events",relays:S});s.value==null&&(s.value=(p=m.find(_=>!_.tags.some(w=>w[0]==="e")))==null?void 0:p.id),r.value==null&&(r.value=(g=m.sort((_,w)=>w.created_at-_.created_at)[0])==null?void 0:g.id)}r.value=r.value||s.value,i.value=!1}),(l,d)=>{const p=E("router-link");return o(),c("div",ei,[r.value?(o(),c("span",ti,[R(" In reply to "),k(p,{class:"text-primary",to:{name:y(K).events.display,params:{id:r.value}}},{default:I(()=>[k(Ga,{id:r.value,event:a.value},null,8,["id","event"])]),_:1},8,["to"])])):b("v-if",!0),r.value&&s.value?(o(),c("span",ni,"•")):b("v-if",!0),s.value?(o(),c("span",ai,[k(p,{class:"text-primary",to:{name:y(K).events.display,params:{id:s.value}}},{default:I(()=>[R(" view thread ")]),_:1},8,["to"])])):b("v-if",!0)])}}}),ri=N(ii,[["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsComment/components/NsCommentController.vue"]]);var et={name:"RefreshIcon",extends:G,computed:{pathId:function(){return"pv_icon_clip_".concat(U())}}},oi=["clipPath"],si=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.77051 5.96336C6.84324 5.99355 6.92127 6.00891 7.00002 6.00854C7.07877 6.00891 7.1568 5.99355 7.22953 5.96336C7.30226 5.93317 7.36823 5.88876 7.42357 5.83273L9.82101 3.43529C9.93325 3.32291 9.99629 3.17058 9.99629 3.01175C9.99629 2.85292 9.93325 2.70058 9.82101 2.5882L7.42357 0.190763C7.3687 0.131876 7.30253 0.0846451 7.22901 0.0518865C7.15549 0.019128 7.07612 0.00151319 6.99564 9.32772e-05C6.91517 -0.00132663 6.83523 0.0134773 6.7606 0.0436218C6.68597 0.0737664 6.61817 0.118634 6.56126 0.175548C6.50435 0.232462 6.45948 0.300257 6.42933 0.374888C6.39919 0.449519 6.38439 0.529456 6.38581 0.609933C6.38722 0.690409 6.40484 0.769775 6.4376 0.843296C6.47036 0.916817 6.51759 0.982986 6.57647 1.03786L7.95103 2.41241H6.99998C5.46337 2.41241 3.98969 3.02283 2.90314 4.10938C1.81659 5.19593 1.20618 6.66961 1.20618 8.20622C1.20618 9.74283 1.81659 11.2165 2.90314 12.3031C3.98969 13.3896 5.46337 14 6.99998 14C8.53595 13.9979 10.0084 13.3868 11.0945 12.3007C12.1806 11.2146 12.7917 9.74218 12.7938 8.20622C12.7938 8.04726 12.7306 7.89481 12.6182 7.78241C12.5058 7.67001 12.3534 7.60686 12.1944 7.60686C12.0355 7.60686 11.883 7.67001 11.7706 7.78241C11.6582 7.89481 11.5951 8.04726 11.5951 8.20622C11.5951 9.11504 11.3256 10.0035 10.8207 10.7591C10.3157 11.5148 9.59809 12.1037 8.75845 12.4515C7.9188 12.7993 6.99489 12.8903 6.10353 12.713C5.21217 12.5357 4.3934 12.0981 3.75077 11.4554C3.10813 10.8128 2.67049 9.99404 2.49319 9.10268C2.31589 8.21132 2.40688 7.2874 2.75468 6.44776C3.10247 5.60811 3.69143 4.89046 4.44709 4.38554C5.20275 3.88063 6.09116 3.61113 6.99998 3.61113H7.95098L6.57647 4.98564C6.46423 5.09802 6.40119 5.25035 6.40119 5.40918C6.40119 5.56801 6.46423 5.72035 6.57647 5.83273C6.63181 5.88876 6.69778 5.93317 6.77051 5.96336Z",fill:"currentColor"},null,-1),li=[si],ui=["id"],ci=u("rect",{width:"14",height:"14",fill:"white"},null,-1),di=[ci];function mi(e,t,n,i,r,a){return o(),c("svg",v({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),[u("g",{clipPath:"url(#".concat(a.pathId,")")},li,8,oi),u("defs",null,[u("clipPath",{id:"".concat(a.pathId)},di,8,ui)])],16)}et.render=mi;var tt={name:"SearchMinusIcon",extends:G,computed:{pathId:function(){return"pv_icon_clip_".concat(U())}}},pi=["clipPath"],vi=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.0208 12.0411C4.83005 12.0411 3.66604 11.688 2.67596 11.0265C1.68589 10.3649 0.914216 9.42464 0.458534 8.32452C0.00285271 7.22441 -0.116374 6.01388 0.11593 4.84601C0.348235 3.67813 0.921637 2.60537 1.76363 1.76338C2.60562 0.921393 3.67838 0.34799 4.84625 0.115686C6.01412 -0.116618 7.22466 0.00260857 8.32477 0.45829C9.42488 0.913972 10.3652 1.68564 11.0267 2.67572C11.6883 3.66579 12.0414 4.8298 12.0414 6.02056C12.0395 7.41563 11.5542 8.76029 10.6783 9.8305L13.8244 12.9765C13.9367 13.089 13.9997 13.2414 13.9997 13.4003C13.9997 13.5592 13.9367 13.7116 13.8244 13.8241C13.769 13.8801 13.703 13.9245 13.6302 13.9548C13.5575 13.985 13.4794 14.0003 13.4006 14C13.3218 14.0003 13.2437 13.985 13.171 13.9548C13.0982 13.9245 13.0322 13.8801 12.9768 13.8241L9.83082 10.678C8.76059 11.5539 7.4159 12.0393 6.0208 12.0411ZM6.0208 1.20731C5.07199 1.20731 4.14449 1.48867 3.35559 2.0158C2.56669 2.54292 1.95181 3.29215 1.58872 4.16874C1.22562 5.04532 1.13062 6.00989 1.31572 6.94046C1.50083 7.87104 1.95772 8.72583 2.62863 9.39674C3.29954 10.0676 4.15433 10.5245 5.0849 10.7096C6.01548 10.8947 6.98005 10.7997 7.85663 10.4367C8.73322 10.0736 9.48244 9.45868 10.0096 8.66978C10.5367 7.88088 10.8181 6.95337 10.8181 6.00457C10.8181 4.73226 10.3126 3.51206 9.41297 2.6124C8.51331 1.71274 7.29311 1.20731 6.0208 1.20731ZM4.00591 6.60422H8.00362C8.16266 6.60422 8.31518 6.54104 8.42764 6.42859C8.5401 6.31613 8.60328 6.1636 8.60328 6.00456C8.60328 5.84553 8.5401 5.693 8.42764 5.58054C8.31518 5.46809 8.16266 5.40491 8.00362 5.40491H4.00591C3.84687 5.40491 3.69434 5.46809 3.58189 5.58054C3.46943 5.693 3.40625 5.84553 3.40625 6.00456C3.40625 6.1636 3.46943 6.31613 3.58189 6.42859C3.69434 6.54104 3.84687 6.60422 4.00591 6.60422Z",fill:"currentColor"},null,-1),fi=[vi],hi=["id"],yi=u("rect",{width:"14",height:"14",fill:"white"},null,-1),gi=[yi];function bi(e,t,n,i,r,a){return o(),c("svg",v({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),[u("g",{clipPath:"url(#".concat(a.pathId,")")},fi,8,pi),u("defs",null,[u("clipPath",{id:"".concat(a.pathId)},gi,8,hi)])],16)}tt.render=bi;var nt={name:"SearchPlusIcon",extends:G,computed:{pathId:function(){return"pv_icon_clip_".concat(U())}}},wi=["clipPath"],Ci=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.67596 11.0265C3.66604 11.688 4.83005 12.0411 6.0208 12.0411C6.81143 12.0411 7.59432 11.8854 8.32477 11.5828C8.86999 11.357 9.37802 11.0526 9.83311 10.6803L12.9768 13.8241C13.0322 13.8801 13.0982 13.9245 13.171 13.9548C13.2437 13.985 13.3218 14.0003 13.4006 14C13.4794 14.0003 13.5575 13.985 13.6302 13.9548C13.703 13.9245 13.769 13.8801 13.8244 13.8241C13.9367 13.7116 13.9997 13.5592 13.9997 13.4003C13.9997 13.2414 13.9367 13.089 13.8244 12.9765L10.6806 9.8328C11.0529 9.37773 11.3572 8.86972 11.5831 8.32452C11.8856 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0267 2.67572C10.3652 1.68564 9.42488 0.913972 8.32477 0.45829C7.22466 0.00260857 6.01412 -0.116618 4.84625 0.115686C3.67838 0.34799 2.60562 0.921393 1.76363 1.76338C0.921637 2.60537 0.348235 3.67813 0.11593 4.84601C-0.116374 6.01388 0.00285271 7.22441 0.458534 8.32452C0.914216 9.42464 1.68589 10.3649 2.67596 11.0265ZM3.35559 2.0158C4.14449 1.48867 5.07199 1.20731 6.0208 1.20731C7.29311 1.20731 8.51331 1.71274 9.41297 2.6124C10.3126 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5367 7.88088 10.0096 8.66978C9.48244 9.45868 8.73322 10.0736 7.85663 10.4367C6.98005 10.7997 6.01548 10.8947 5.0849 10.7096C4.15433 10.5245 3.29954 10.0676 2.62863 9.39674C1.95772 8.72583 1.50083 7.87104 1.31572 6.94046C1.13062 6.00989 1.22562 5.04532 1.58872 4.16874C1.95181 3.29215 2.56669 2.54292 3.35559 2.0158ZM6.00481 8.60309C5.84641 8.60102 5.69509 8.53718 5.58308 8.42517C5.47107 8.31316 5.40722 8.16183 5.40515 8.00344V6.60422H4.00591C3.84687 6.60422 3.69434 6.54104 3.58189 6.42859C3.46943 6.31613 3.40625 6.1636 3.40625 6.00456C3.40625 5.84553 3.46943 5.693 3.58189 5.58054C3.69434 5.46809 3.84687 5.40491 4.00591 5.40491H5.40515V4.00572C5.40515 3.84668 5.46833 3.69416 5.58079 3.5817C5.69324 3.46924 5.84577 3.40607 6.00481 3.40607C6.16385 3.40607 6.31637 3.46924 6.42883 3.5817C6.54129 3.69416 6.60447 3.84668 6.60447 4.00572V5.40491H8.00362C8.16266 5.40491 8.31518 5.46809 8.42764 5.58054C8.5401 5.693 8.60328 5.84553 8.60328 6.00456C8.60328 6.1636 8.5401 6.31613 8.42764 6.42859C8.31518 6.54104 8.16266 6.60422 8.00362 6.60422H6.60447V8.00344C6.60239 8.16183 6.53855 8.31316 6.42654 8.42517C6.31453 8.53718 6.1632 8.60102 6.00481 8.60309Z",fill:"currentColor"},null,-1),ki=[Ci],_i=["id"],Ii=u("rect",{width:"14",height:"14",fill:"white"},null,-1),Oi=[Ii];function Si(e,t,n,i,r,a){return o(),c("svg",v({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),[u("g",{clipPath:"url(#".concat(a.pathId,")")},ki,8,wi),u("defs",null,[u("clipPath",{id:"".concat(a.pathId)},Oi,8,_i)])],16)}nt.render=Si;var at={name:"UndoIcon",extends:G,computed:{pathId:function(){return"pv_icon_clip_".concat(U())}}},Pi=["clipPath"],$i=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.77042 5.96336C6.84315 5.99355 6.92118 6.00891 6.99993 6.00854C7.07868 6.00891 7.15671 5.99355 7.22944 5.96336C7.30217 5.93317 7.36814 5.88876 7.42348 5.83273C7.53572 5.72035 7.59876 5.56801 7.59876 5.40918C7.59876 5.25035 7.53572 5.09802 7.42348 4.98564L6.04897 3.61113H6.99998C7.9088 3.61113 8.79722 3.88063 9.55288 4.38554C10.3085 4.89046 10.8975 5.60811 11.2453 6.44776C11.5931 7.2874 11.6841 8.21132 11.5068 9.10268C11.3295 9.99404 10.8918 10.8128 10.2492 11.4554C9.60657 12.0981 8.7878 12.5357 7.89644 12.713C7.00508 12.8903 6.08116 12.7993 5.24152 12.4515C4.40188 12.1037 3.68422 11.5148 3.17931 10.7591C2.67439 10.0035 2.4049 9.11504 2.4049 8.20622C2.4049 8.04726 2.34175 7.89481 2.22935 7.78241C2.11695 7.67001 1.9645 7.60686 1.80554 7.60686C1.64658 7.60686 1.49413 7.67001 1.38172 7.78241C1.26932 7.89481 1.20618 8.04726 1.20618 8.20622C1.20829 9.74218 1.81939 11.2146 2.90548 12.3007C3.99157 13.3868 5.46402 13.9979 6.99998 14C8.5366 14 10.0103 13.3896 11.0968 12.3031C12.1834 11.2165 12.7938 9.74283 12.7938 8.20622C12.7938 6.66961 12.1834 5.19593 11.0968 4.10938C10.0103 3.02283 8.5366 2.41241 6.99998 2.41241H6.04892L7.42348 1.03786C7.48236 0.982986 7.5296 0.916817 7.56235 0.843296C7.59511 0.769775 7.61273 0.690409 7.61415 0.609933C7.61557 0.529456 7.60076 0.449519 7.57062 0.374888C7.54047 0.300257 7.49561 0.232462 7.43869 0.175548C7.38178 0.118634 7.31398 0.0737664 7.23935 0.0436218C7.16472 0.0134773 7.08478 -0.00132663 7.00431 9.32772e-05C6.92383 0.00151319 6.84447 0.019128 6.77095 0.0518865C6.69742 0.0846451 6.63126 0.131876 6.57638 0.190763L4.17895 2.5882C4.06671 2.70058 4.00366 2.85292 4.00366 3.01175C4.00366 3.17058 4.06671 3.32291 4.17895 3.43529L6.57638 5.83273C6.63172 5.88876 6.69769 5.93317 6.77042 5.96336Z",fill:"currentColor"},null,-1),Li=[$i],Mi=["id"],Ni=u("rect",{width:"14",height:"14",fill:"white"},null,-1),Di=[Ni];function xi(e,t,n,i,r,a){return o(),c("svg",v({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),[u("g",{clipPath:"url(#".concat(a.pathId,")")},Li,8,Pi),u("defs",null,[u("clipPath",{id:"".concat(a.pathId)},Di,8,Mi)])],16)}at.render=xi;var Ai=`
.p-image-mask {
    display: flex;
    align-items: center;
    justify-content: center;
}

.p-image-preview-container {
    position: relative;
    display: inline-block;
}

.p-image-preview-indicator {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s;
}

.p-image-preview-container:hover > .p-image-preview-indicator {
    opacity: 1;
    cursor: pointer;
}

.p-image-preview-container > img {
    cursor: pointer;
}

.p-image-toolbar {
    position: absolute;
    top: 0;
    right: 0;
    display: flex;
}

.p-image-action.p-link {
    display: flex;
    justify-content: center;
    align-items: center;
}

.p-image-preview {
    transition: transform 0.15s;
    max-width: 100vw;
    max-height: 100vh;
}

.p-image-preview-enter-active {
    transition: all 150ms cubic-bezier(0, 0, 0.2, 1);
}
.p-image-preview-leave-active {
    transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
}
.p-image-preview-enter-from,
.p-image-preview-leave-to {
    opacity: 0;
    transform: scale(0.7);
}
`,Ei={root:function(t){var n=t.props;return["p-image p-component",{"p-image-preview-container":n.preview}]},image:function(t){var n=t.props;return n.image},button:"p-image-preview-indicator",icon:"p-image-preview-icon",mask:"p-image-mask p-component-overlay p-component-overlay-enter",rotateRightButton:"p-image-action p-link",rotateLeftButton:"p-image-action p-link",zoomOutButton:function(t){var n=t.instance;return["p-image-action p-link",{"p-disabled":n.isZoomOutDisabled}]},zoomInButton:function(t){var n=t.instance;return["p-image-action p-link",{"p-disabled":n.isZoomInDisabled}]},closeButton:"p-image-action p-link",preview:"p-image-preview"},Ti=fe(Ai,{name:"image",manual:!0}),ji=Ti.load,Bi={name:"BaseImage",extends:Q,props:{preview:{type:Boolean,default:!1},class:{type:null,default:null},style:{type:null,default:null},imageStyle:{type:null,default:null},imageClass:{type:null,default:null},previewButtonProps:{type:null,default:null},indicatorIcon:{type:String,default:void 0},zoomInDisabled:{type:Boolean,default:!1},zoomOutDisabled:{type:Boolean,default:!1}},css:{classes:Ei,loadStyle:ji},provide:function(){return{$parentInstance:this}}},Me={name:"Image",extends:Bi,inheritAttrs:!1,emits:["show","hide","error"],mask:null,data:function(){return{maskVisible:!1,previewVisible:!1,rotate:0,scale:1}},beforeUnmount:function(){this.mask&&Y.clear(this.container)},methods:{maskRef:function(t){this.mask=t},toolbarRef:function(t){this.toolbarRef=t},onImageClick:function(){var t=this;this.preview&&(D.addClass(document.body,"p-overflow-hidden"),this.maskVisible=!0,setTimeout(function(){t.previewVisible=!0},25))},onPreviewImageClick:function(){this.previewClick=!0},onMaskClick:function(t){var n=[t.target.classList].includes("p-image-action")||t.target.closest(".p-image-action");n||(this.previewClick||(this.previewVisible=!1,this.rotate=0,this.scale=1),this.previewClick=!1)},onMaskKeydown:function(t){var n=this;switch(t.code){case"Escape":this.hidePreview(),setTimeout(function(){D.focus(n.$refs.previewButton)},200),t.preventDefault();break}},onError:function(){this.$emit("error")},rotateRight:function(){this.rotate+=90,this.previewClick=!0},rotateLeft:function(){this.rotate-=90,this.previewClick=!0},zoomIn:function(){this.scale=this.scale+.1,this.previewClick=!0},zoomOut:function(){this.scale=this.scale-.1,this.previewClick=!0},onBeforeEnter:function(){Y.set("modal",this.mask,this.$primevue.config.zIndex.modal)},onEnter:function(){this.focus(),this.$emit("show")},onBeforeLeave:function(){!this.isUnstyled&&D.addClass(this.mask,"p-component-overlay-leave")},onLeave:function(){this.$emit("hide")},onAfterLeave:function(t){Y.clear(t),this.maskVisible=!1},focus:function(){var t=this.mask.querySelector("[autofocus]");t&&t.focus()},hidePreview:function(){this.previewVisible=!1,this.rotate=0,this.scale=1,D.removeClass(document.body,"p-overflow-hidden")}},computed:{containerClass:function(){return[this.cx("root"),this.class]},rotateClass:function(){return"p-image-preview-rotate-"+this.rotate},imagePreviewStyle:function(){return{transform:"rotate("+this.rotate+"deg) scale("+this.scale+")"}},isZoomInDisabled:function(){return this.zoomInDisabled||this.scale>=1.5},isZoomOutDisabled:function(){return this.zoomOutDisabled||this.scale<=.5},rightAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.rotateRight:void 0},leftAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.rotateLeft:void 0},zoomInAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.zoomIn:void 0},zoomOutAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.zoomOut:void 0},closeAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0}},components:{Portal:Ke,EyeIcon:Mt,RefreshIcon:et,UndoIcon:at,SearchMinusIcon:tt,SearchPlusIcon:nt,TimesIcon:yt},directives:{focustrap:gt}};function re(e){"@babel/helpers - typeof";return re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},re(e)}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ze(Object(n),!0).forEach(function(i){Ri(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Ri(e,t,n){return t=zi(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zi(e){var t=Vi(e,"string");return re(t)==="symbol"?t:String(t)}function Vi(e,t){if(re(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(re(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hi=["aria-modal"],Ui=["aria-label"],Fi=["aria-label"],Ki=["disabled","aria-label"],Wi=["disabled","aria-label"],Zi=["aria-label"],qi=["src"];function Xi(e,t,n,i,r,a){var s=E("RefreshIcon"),l=E("UndoIcon"),d=E("SearchMinusIcon"),p=E("SearchPlusIcon"),g=E("TimesIcon"),C=E("Portal"),S=Ie("focustrap");return o(),c("span",v({class:a.containerClass,style:e.style},e.ptm("root"),{"data-pc-name":"image"}),[O(e.$slots,"image",{onError:a.onError},function(){return[u("img",v({style:e.imageStyle,class:[e.cx("image"),e.imageClass],onError:t[0]||(t[0]=function(){return a.onError&&a.onError.apply(a,arguments)})},de(de({},e.$attrs),e.ptm("image"))),null,16)]}),e.preview?(o(),c("button",v({key:0,ref:"previewButton",type:"button",class:e.cx("button"),onClick:t[1]||(t[1]=function(){return a.onImageClick&&a.onImageClick.apply(a,arguments)})},de(de({},e.previewButtonProps),e.ptm("button"))),[O(e.$slots,"indicatoricon",{},function(){return[(o(),f(J(e.indicatorIcon?"i":"EyeIcon"),v({class:e.cx("icon")},e.ptm("icon")),null,16,["class"]))]})],16)):b("",!0),k(C,null,{default:I(function(){return[r.maskVisible?ae((o(),c("div",v({key:0,ref:a.maskRef,role:"dialog",class:e.cx("mask"),"aria-modal":r.maskVisible,onClick:t[8]||(t[8]=function(){return a.onMaskClick&&a.onMaskClick.apply(a,arguments)}),onKeydown:t[9]||(t[9]=function(){return a.onMaskKeydown&&a.onMaskKeydown.apply(a,arguments)})},e.ptm("mask")),[u("div",v({class:"p-image-toolbar"},e.ptm("toolbar")),[u("button",v({class:e.cx("rotateRightButton"),onClick:t[2]||(t[2]=function(){return a.rotateRight&&a.rotateRight.apply(a,arguments)}),type:"button","aria-label":a.rightAriaLabel},e.ptm("rotateRightButton"),{"data-pc-group-section":"action"}),[O(e.$slots,"refresh",{},function(){return[k(s,F(X(e.ptm("rotateRightIcon"))),null,16)]})],16,Ui),u("button",v({class:e.cx("rotateLeftButton"),onClick:t[3]||(t[3]=function(){return a.rotateLeft&&a.rotateLeft.apply(a,arguments)}),type:"button","aria-label":a.leftAriaLabel},e.ptm("rotateLeftButton"),{"data-pc-group-section":"action"}),[O(e.$slots,"undo",{},function(){return[k(l,F(X(e.ptm("rotateLeftIcon"))),null,16)]})],16,Fi),u("button",v({class:e.cx("zoomOutButton"),onClick:t[4]||(t[4]=function(){return a.zoomOut&&a.zoomOut.apply(a,arguments)}),type:"button",disabled:a.isZoomOutDisabled,"aria-label":a.zoomOutAriaLabel},e.ptm("zoomOutButton"),{"data-pc-group-section":"action"}),[O(e.$slots,"zoomout",{},function(){return[k(d,F(X(e.ptm("zoomOutIcon"))),null,16)]})],16,Ki),u("button",v({class:e.cx("zoomInButton"),onClick:t[5]||(t[5]=function(){return a.zoomIn&&a.zoomIn.apply(a,arguments)}),type:"button",disabled:a.isZoomInDisabled,"aria-label":a.zoomInAriaLabel},e.ptm("zoomInButton"),{"data-pc-group-section":"action"}),[O(e.$slots,"zoomin",{},function(){return[k(p,F(X(e.ptm("zoomInIcon"))),null,16)]})],16,Wi),u("button",v({class:e.cx("closeButton"),type:"button",onClick:t[6]||(t[6]=function(){return a.hidePreview&&a.hidePreview.apply(a,arguments)}),"aria-label":a.closeAriaLabel,autofocus:""},e.ptm("closeButton"),{"data-pc-group-section":"action"}),[O(e.$slots,"close",{},function(){return[k(g,F(X(e.ptm("closeIcon"))),null,16)]})],16,Zi)],16),k(Oe,v({name:"p-image-preview",onBeforeEnter:a.onBeforeEnter,onEnter:a.onEnter,onLeave:a.onLeave,onBeforeLeave:a.onBeforeLeave,onAfterLeave:a.onAfterLeave},e.ptm("transition")),{default:I(function(){return[r.previewVisible?(o(),c("div",F(v({key:0},e.ptm("previewContainer"))),[O(e.$slots,"preview",{class:W(e.cx("preview")),style:Fe(a.imagePreviewStyle),onClick:a.onPreviewImageClick},function(){return[u("img",v({src:e.$attrs.src,class:e.cx("preview"),style:a.imagePreviewStyle,onClick:t[7]||(t[7]=function(){return a.onPreviewImageClick&&a.onPreviewImageClick.apply(a,arguments)})},e.ptm("preview")),null,16,qi)]})],16)):b("",!0)]}),_:3},16,["onBeforeEnter","onEnter","onLeave","onBeforeLeave","onAfterLeave"])],16,Hi)),[[S]]):b("",!0)]}),_:3})],16)}Me.render=Xi;var Yi=`
.p-tag {
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.p-tag-icon,
.p-tag-value,
.p-tag-icon.pi {
    line-height: 1.5;
}

.p-tag.p-tag-rounded {
    border-radius: 10rem;
}
`,Ji={root:function(t){var n=t.props;return["p-tag p-component",{"p-tag-info":n.severity==="info","p-tag-success":n.severity==="success","p-tag-warning":n.severity==="warning","p-tag-danger":n.severity==="danger","p-tag-rounded":n.rounded}]},icon:"p-tag-icon",value:"p-tag-value"},Qi=fe(Yi,{name:"tag",manual:!0}),Gi=Qi.load,er={name:"BaseTag",extends:Q,props:{value:null,severity:null,rounded:Boolean,icon:String},css:{classes:Ji,loadStyle:Gi},provide:function(){return{$parentInstance:this}}},it={name:"Tag",extends:er};function tr(e,t,n,i,r,a){return o(),c("span",v({class:e.cx("root")},e.ptm("root"),{"data-pc-name":"tag"}),[e.$slots.icon?(o(),f(J(e.$slots.icon),v({key:0,class:e.cx("icon")},e.ptm("icon")),null,16,["class"])):e.icon?(o(),c("span",v({key:1,class:[e.cx("icon"),e.icon]},e.ptm("icon")),null,16)):b("",!0),O(e.$slots,"default",{},function(){return[u("span",v({class:e.cx("value")},e.ptm("value")),P(e.value),17)]})],16)}it.render=tr;const nr=M({__name:"NsTag",props:{value:{type:String,required:!0},raw:Boolean},setup(e){const t=e;return(n,i)=>{const r=E("router-link");return o(),f(r,{class:"ns-tag-component",to:{name:y(K).tags.display,params:{tag:t.value}}},{default:I(()=>[e.raw?(o(),f(y(be),{key:0,link:"",label:`#${e.value}`,class:"p-0 inline-block"},null,8,["label"])):(o(),c(x,{key:1},[b(' <span text v-if="raw">#{{ value }}</span> '),k(y(it),{class:"surface-ground text-color-secondary",value:`#${e.value}`},null,8,["value"])],2112))]),_:1},8,["to"])}}}),ar=N(nr,[["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsTag/NsTag.vue"]]),ir={class:"ns-kind1-content-component"},rr=["src","alt"],or=["src"],sr=["src"],lr=["href"],ur=["href"],cr=M({__name:"NsKind1Content",props:{event:{type:Object,required:!0},skipMedia:Boolean},setup(e){const t=e,n=h(()=>{var _,w;const m=Ue({content:((_=t.event.content)==null?void 0:_.trim())??"",tags:t.event.tags}).filter(T=>!(t.skipMedia&&T.type==="link"&&["image","video"].includes(T.value.type))).filter((T,$,V)=>{var H;return!(T.type==="newline"&&((H=V[$-1])==null?void 0:H.type)==="newline")});return((w=m.slice(-1)[0])==null?void 0:w.type)==="newline"?m.slice(0,-1):m}),i=m=>m.type==="text",r=m=>m.type==="emoji",a=m=>m.type==="link",s=m=>a(m)&&m.value.type==="image",l=m=>a(m)&&m.value.type==="video",d=m=>a(m)&&m.value.type==="audio",p=m=>m.type==="newline",g=m=>m.type==="topic",C=m=>m.type.match(/^nostr:n(profile|pub|event|ote)$/),S=m=>m.type.match(/^nostr:np(rofile|ub)$/);return(m,_)=>(o(),c("span",ir,[(o(!0),c(x,null,ne(n.value,(w,T)=>(o(),c(x,{key:T},[i(w)?(o(),c(x,{key:0},[R(P(w.value),1)],64)):r(w)?(o(),c("img",{key:1,src:w.value.url,alt:w.value.name,style:{height:"25px"}},null,8,rr)):p(w)?(o(!0),c(x,{key:2},ne(w.value,($,V)=>(o(),c("br",{key:`newline-${V}`}))),128)):s(w)?(o(),f(y(Me),{key:3,class:"my-4","image-style":"max-width: 100%",src:w.value.url,alt:"image",preview:""},null,8,["src"])):l(w)?(o(),c("video",{key:4,class:"my-4",src:w.value.url,controls:"",style:{"max-width":"100%","max-height":"500px"}},null,8,or)):d(w)?(o(),c("audio",{key:5,class:"my-4",src:w.value.url,controls:""},[u("a",{href:w.value.url},'{item.value.url.replace(/https?:\\/\\/(www\\.)?/, "")}',8,lr)],8,sr)):g(w)?(o(),f(ar,{key:6,raw:"",value:w.value},null,8,["value"])):S(w)?(o(),f(ue,{key:7,pubkey:w.value.pubkey,inline:""},null,8,["pubkey"])):C(w)?(o(),f(se,{key:8,inline:"","skip-media":e.skipMedia,id:w.value.entity||w.value.id,relays:w.value.relays||[],class:"mt-4"},null,8,["skip-media","id","relays"])):a(w)?(o(),c(x,{key:9},[b(" TODO add relay to NsNote"),u("a",{href:w.value.url,target:"_blank"},P(w.value.url),9,ur)],2112)):(o(),c(x,{key:10},[R(P(w.value)+" -- "+P(C(w)),1)],64))],64))),128))]))}}),rt=N(cr,[["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsKind1Content/NsKind1Content.vue"]]),dr=M({__name:"NsComment",props:{event:{type:Object,required:!0},inline:Boolean,inThread:Boolean},setup(e){return(t,n)=>(o(),f(ce,{event:e.event,inline:e.inline,"in-thread":e.inThread,class:"ns-comment-component"},{default:I(()=>[e.inThread?b("v-if",!0):(o(),f(ri,{key:0,event:e.event,class:"mb-3"},null,8,["event"])),k(rt,{event:e.event},null,8,["event"])]),_:1},8,["event","inline","in-thread"]))}}),mr=N(dr,[["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsComment/NsComment.vue"]]);var ot={name:"MinusIcon",extends:G},pr=u("path",{d:"M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z",fill:"currentColor"},null,-1),vr=[pr];function fr(e,t,n,i,r,a){return o(),c("svg",v({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),vr,16)}ot.render=fr;var st={name:"PlusIcon",extends:G,computed:{pathId:function(){return"pv_icon_clip_".concat(U())}}},hr=["clipPath"],yr=u("path",{d:"M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z",fill:"currentColor"},null,-1),gr=[yr],br=["id"],wr=u("rect",{width:"14",height:"14",fill:"white"},null,-1),Cr=[wr];function kr(e,t,n,i,r,a){return o(),c("svg",v({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),[u("g",{clipPath:"url(#".concat(a.pathId,")")},gr,8,hr),u("defs",null,[u("clipPath",{id:"".concat(a.pathId)},Cr,8,br)])],16)}st.render=kr;var _r=`
.p-panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.p-panel-title {
    line-height: 1;
}

.p-panel-header-icon {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    text-decoration: none;
    overflow: hidden;
    position: relative;
}
`,Ir={root:function(t){var n=t.props;return["p-panel p-component",{"p-panel-toggleable":n.toggleable}]},header:"p-panel-header",title:"p-panel-title",icons:"p-panel-icons",toggler:"p-panel-header-icon p-panel-toggler p-link",toggleablecontent:"p-toggleable-content",content:"p-panel-content",footer:"p-panel-footer"},Or=fe(_r,{name:"panel",manual:!0}),Sr=Or.load,Pr={name:"BasePanel",extends:Q,props:{header:String,toggleable:Boolean,collapsed:Boolean,toggleButtonProps:{type:null,default:null}},css:{classes:Ir,loadStyle:Sr},provide:function(){return{$parentInstance:this}}},he={name:"Panel",extends:Pr,emits:["update:collapsed","toggle"],data:function(){return{d_collapsed:this.collapsed}},watch:{collapsed:function(t){this.d_collapsed=t}},methods:{toggle:function(t){this.d_collapsed=!this.d_collapsed,this.$emit("update:collapsed",this.d_collapsed),this.$emit("toggle",{originalEvent:t,value:this.d_collapsed})},onKeyDown:function(t){(t.code==="Enter"||t.code==="Space")&&(this.toggle(t),t.preventDefault())}},computed:{ariaId:function(){return U()},buttonAriaLabel:function(){return this.toggleButtonProps&&this.toggleButtonProps["aria-label"]?this.toggleButtonProps["aria-label"]:this.header}},components:{PlusIcon:st,MinusIcon:ot},directives:{ripple:We}};function oe(e){"@babel/helpers - typeof";return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(e)}function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ve(Object(n),!0).forEach(function(i){$r(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function $r(e,t,n){return t=Lr(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lr(e){var t=Mr(e,"string");return oe(t)==="symbol"?t:String(t)}function Mr(e,t){if(oe(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(oe(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nr=["id"],Dr=["id","aria-label","aria-controls","aria-expanded"],xr=["id","aria-labelledby"];function Ar(e,t,n,i,r,a){var s=Ie("ripple");return o(),c("div",v({class:e.cx("root")},e.ptm("root"),{"data-pc-name":"panel"}),[u("div",v({class:e.cx("header")},e.ptm("header")),[O(e.$slots,"header",{id:a.ariaId+"_header",class:W(e.cx("title"))},function(){return[e.header?(o(),c("span",v({key:0,id:a.ariaId+"_header",class:e.cx("title")},e.ptm("title")),P(e.header),17,Nr)):b("",!0)]}),u("div",v({class:e.cx("icons")},e.ptm("icons")),[O(e.$slots,"icons"),e.toggleable?ae((o(),c("button",v({key:0,id:a.ariaId+"_header",type:"button",role:"button",class:e.cx("toggler"),"aria-label":a.buttonAriaLabel,"aria-controls":a.ariaId+"_content","aria-expanded":!r.d_collapsed,onClick:t[0]||(t[0]=function(){return a.toggle&&a.toggle.apply(a,arguments)}),onKeydown:t[1]||(t[1]=function(){return a.onKeyDown&&a.onKeyDown.apply(a,arguments)})},He(He({},e.toggleButtonProps),e.ptm("toggler"))),[O(e.$slots,"togglericon",{collapsed:r.d_collapsed},function(){return[(o(),f(J(r.d_collapsed?"PlusIcon":"MinusIcon"),F(X(e.ptm("togglericon"))),null,16))]})],16,Dr)),[[s]]):b("",!0)],16)],16),k(Oe,v({name:"p-toggleable-content"},e.ptm("transition")),{default:I(function(){return[ae(u("div",v({id:a.ariaId+"_content",class:e.cx("toggleablecontent"),role:"region","aria-labelledby":a.ariaId+"_header"},e.ptm("toggleablecontent")),[u("div",v({class:e.cx("content")},e.ptm("content")),[O(e.$slots,"default")],16),e.$slots.footer?(o(),c("div",v({key:0,class:e.cx("footer")},e.ptm("footer")),[O(e.$slots,"footer")],16)):b("",!0)],16,xr),[[bt,!r.d_collapsed]])]}),_:3},16)],16)}he.render=Ar;const Er=e=>(pe("data-v-acd127ef"),e=e(),ve(),e),Tr={key:1},jr=Er(()=>u("span",{class:"ml-1"},"zapped:",-1)),Br={key:0,class:"inset-shadow-1 p-3"},Rr=M({__name:"NsZap",props:{event:{type:Object,required:!0}},setup(e){const t=e,n=h(()=>{var a,s;return((a=t.event.schema.mainEntityOfPage)==null?void 0:a["@id"])||((s=t.event.schema.mainEntityOfPage)==null?void 0:s.sameAs)}),i=h(()=>{var a;return(a=t.event.schema.provider)==null?void 0:a["@id"]}),r=h(()=>{var a;return(a=t.event.schema.customer)==null?void 0:a["@id"]});return(a,s)=>(o(),f(y(he),null,{header:I(()=>[u("div",null,[r.value?(o(),f(ue,{key:0,inline:"",pubkey:r.value},null,8,["pubkey"])):(o(),c("span",Tr,"Someone")),jr])]),default:I(()=>[e.event.schema.description&&!e.event.content?(o(),c("div",Br,P(e.event.schema.description),1)):b("v-if",!0),n.value?(o(),f(se,{key:1,id:n.value},null,8,["id"])):i.value?(o(),f(Qe,{key:2,pubkey:i.value},null,8,["pubkey"])):b("v-if",!0),u("pre",null,P(e.event),1)]),_:1}))}});const zr=N(Rr,[["__scopeId","data-v-acd127ef"],["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsZap/NsZap.vue"]]),Vr=M({__name:"NsNote",props:{event:{type:Object,required:!0},skipMedia:Boolean,inline:Boolean,inThread:Boolean},setup(e){return(t,n)=>(o(),f(ce,{class:"ns-note-component",event:e.event,inline:e.inline,"in-thread":e.inThread},{header:I(()=>[O(t.$slots,"header")]),default:I(()=>[k(rt,{event:e.event,"skip-media":e.skipMedia},null,8,["event","skip-media"])]),_:3},8,["event","inline","in-thread"]))}}),lt=N(Vr,[["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsNote/NsNote.vue"]]),Hr=e=>(pe("data-v-cd4dac36"),e=e(),ve(),e),Ur=Hr(()=>u("span",null,"reposted:",-1)),Fr=M({__name:"NsShareAction",props:{event:{type:Object,required:!0}},setup(e){const t=e,n=h(()=>{try{const r=JSON.parse(t.event.content);return wt(r)}catch{return}}),i=h(()=>{var r,a;return((r=t.event.schema.object)==null?void 0:r["@id"])||((a=t.event.schema.object)==null?void 0:a.sameAs)});return(r,a)=>(o(),f(y(he),null,{header:I(()=>[u("div",null,[k(ue,{inline:"",pubkey:e.event.pubkey},null,8,["pubkey"]),R(),Ur])]),default:I(()=>[n.value?(o(),f(se,{key:0,event:n.value},null,8,["event"])):(o(),f(se,{key:1,id:i.value},null,8,["id"]))]),_:1}))}});const Kr=N(Fr,[["__scopeId","data-v-cd4dac36"],["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsShareAction/NsShareAction.vue"]]),Wr=M({__name:"NsReactAction",props:{event:{type:Object,required:!0}},setup(e){const t=e,n=h(()=>{var i;return(i=t.event.schema.object)==null?void 0:i["@id"]});return(i,r)=>(o(),f(y(he),{collapsed:"",toggleable:""},{header:I(()=>[u("div",null,[k(ue,{inline:"",pubkey:e.event.pubkey},null,8,["pubkey"]),R(),u("span",null,"reacted "+P(e.event.content),1)])]),default:I(()=>[k(se,{id:n.value,"in-thread":""},null,8,["id"])]),_:1}))}});const Zr=N(Wr,[["__scopeId","data-v-268c3f08"],["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsReactAction/NsReactAction.vue"]]),qr={key:0},Xr=u("div",{class:"font-medium"},"Sensitive Content",-1),Yr=u("div",{class:"text-color-secondary"}," This media may contain sensitive material. Your media settings are configured to warn you when media may be sensitive. ",-1),Jr=u("div",{class:"text-primary text-sm mt-3"},"Click to view",-1),Qr=[Xr,Yr,Jr],Gr=["src"],eo=M({__name:"NsMediaContent",props:{value:{type:Object,required:!0}},setup(e){const t=e,n=h(()=>t.value["@type"]==="VideoObject"),i=h(()=>t.value["@type"]==="ImageObject"),r=h(()=>t.value.contentUrl??""),a=L(!1),s=()=>{a.value=!0},{settings:l}=Nt();return(d,p)=>e.value.isSensitiveContent&&!a.value&&!y(l).showSensitiveContent?(o(),c("div",qr,[u("div",{class:"text-center p-5 m-3 cursor-pointer border-1 border-300 border-round",onClick:s},Qr)])):i.value?(o(),f(y(Me),{key:1,src:r.value,alt:"Image",preview:"","image-style":"width: 100%",style:{width:"100%"}},null,8,["src"])):n.value?(o(),c("video",{key:2,src:r.value,controls:"",style:{"max-width":"100%","max-height":"500px"}},null,8,Gr)):b("v-if",!0)}}),ut=N(eo,[["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsMediaContent/NsMediaContent.vue"]]),to={class:"text-center"},no={key:1},ao=M({__name:"NsMediaObject",props:{event:{type:Object,required:!0},inline:Boolean},setup(e){const t=e,n=h(()=>{var i,r,a;return t.event?{"@type":(i=t.event)==null?void 0:i.schema["@type"],contentUrl:(r=t.event)==null?void 0:r.schema.contentUrl,isSensitiveContent:!!((a=t.event)!=null&&a.schema.contentRating)}:void 0});return(i,r)=>(o(),f(ce,{class:"ns-media-object-component",event:e.event,inline:e.inline},{header:I(()=>[u("div",to,[n.value?(o(),f(ut,{key:0,value:n.value},null,8,["value"])):(o(),c("div",no,"no content"))])]),_:1},8,["event","inline"]))}}),io=N(ao,[["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsMediaObject/NsMediaObject.vue"]]),ro={class:"text-center"},oo=M({__name:"NsSocialMediaPosting",props:{event:{type:Object,required:!0},inline:Boolean,inThread:Boolean},setup(e){const t=e,{fetch:n}=q(),i=L([]);return Z(async()=>{const r=t.event.schema.sharedContent??[],a=r.map(l=>typeof l=="string"&&l.startsWith("nevent1")?Ct.decode(l):null).filter(Boolean);if(a.length){const d=(await n([{ids:a.map(p=>p.data.id)}],{batchId:"NsNote"})).filter(p=>p.schema["@type"]==="ImageObject"||"VideoObject");i.value=d.map(p=>({"@type":p.schema["@type"],contentUrl:p.schema.contentUrl,isSensitiveContent:!!t.event.schema.contentRating||!!p.schema.contentRating}))}const s=r.map(l=>l&&typeof l=="object"&&["ImageObject","VideoObject"].includes(l["@type"])?{"@type":l["@type"],contentUrl:l.contentUrl,isSensitiveContent:!!t.event.schema.contentRating}:null).filter(Boolean);i.value=[...i.value,...s]}),(r,a)=>(o(),f(lt,{class:"ns-social-media-posting-component",event:e.event,inline:e.inline,"skip-media":!!i.value.length,"in-thread":e.inThread},{header:I(()=>[u("div",ro,[i.value.length?(o(),f(ut,{key:0,value:i.value[0]},null,8,["value"])):b("v-if",!0)])]),_:1},8,["event","inline","skip-media","in-thread"]))}}),so=N(oo,[["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsSocialMediaPosting/NsSocialMediaPosting.vue"]]),lo={key:1,class:"ns-event-component"},uo=M({__name:"NsEvent",props:{event:{type:Object},relays:{type:Array,default:()=>[]},id:{type:String},comments:{type:Array},reactions:{type:Array},reposts:{type:Array},skipMedia:Boolean,inline:Boolean,inThread:Boolean},setup(e){const t=e,n=Pt(()=>$t(()=>import("./NsBlogPosting-05e34b4b.js"),["assets/NsBlogPosting-05e34b4b.js","assets/index-f6fe6edb.js","assets/index-ce945204.css","assets/index.esm-75ec1c7e.js","assets/use-settings-ea8687c4.js"])),i=h(()=>{var $;return(($=t.event)==null?void 0:$.id)||t.id}),r=h(()=>!t.event&&!!t.id),{isLoading:a,event:s}=Ge(i,{enabled:r}),l=h(()=>t.event??s.value),d=h(()=>kt(l.value)),p=h(()=>{var $;return(($=l.value)==null?void 0:$.schema["@type"])==="Person"}),g=h(()=>{var $;return(($=l.value)==null?void 0:$.schema["@type"])==="SocialMediaPosting"}),C=h(()=>_t(l.value)),S=h(()=>It(l.value)),m=h(()=>{var $;return(($=l.value)==null?void 0:$.schema["@type"])==="CreativeWork"}),_=h(()=>{var $;return(($=l.value)==null?void 0:$.kind)===1063}),w=h(()=>Ot(l.value)),T=h(()=>St(l.value));return($,V)=>y(a)?(o(),f(qe,{key:0,"in-thread":e.inThread},null,8,["in-thread"])):l.value?(o(),c("div",lo,[d.value?(o(),f(mr,{key:0,event:l.value,inline:e.inline,"in-thread":e.inThread},null,8,["event","inline","in-thread"])):w.value?(o(),f(y(n),{key:1,event:l.value,inline:e.inline,"in-thread":e.inThread},null,8,["event","inline","in-thread"])):C.value?(o(),f(Kr,{key:2,event:l.value},null,8,["event"])):S.value?(o(),f(Zr,{key:3,event:l.value},null,8,["event"])):T.value?(o(),f(zr,{key:4,event:l.value},null,8,["event"])):p.value?(o(),f(Qe,{key:5,event:l.value,inline:e.inline,"in-thread":e.inThread},null,8,["event","inline","in-thread"])):_.value?(o(),c(x,{key:6},[e.skipMedia?b("v-if",!0):(o(),f(io,{key:0,event:l.value,inline:e.inline,"in-thread":e.inThread},null,8,["event","inline","in-thread"]))],64)):g.value?(o(),f(so,{key:7,event:l.value,comments:e.comments,inline:e.inline,"in-thread":e.inThread},null,8,["event","comments","inline","in-thread"])):m.value?(o(),f(lt,{key:8,event:l.value,comments:e.comments,inline:e.inline,"in-thread":e.inThread},null,8,["event","comments","inline","in-thread"])):(o(),f(ce,{key:9,event:l.value,inline:e.inline,"in-thread":e.inThread,comments:e.comments,reactions:e.reactions,reposts:e.reposts},{default:I(()=>[u("pre",null,P(l.value),1)]),_:1},8,["event","inline","in-thread","comments","reactions","reposts"]))])):b("v-if",!0)}}),se=N(uo,[["__file","/Users/nicolasc/Documents/projects/other/tests/nosworld/src/components/structures/NsEvent/NsEvent.vue"]]);export{se as N,qe as a,we as b,Ge as c,ut as d,ar as e,ce as f,Me as s,$e as u};
