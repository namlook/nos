import{f as e,V as F,W as U,h as E,d as I,r as h,q as v,o as f,c as p,b as r,e as m,s as R,F as y,g as x,H as C,_ as T}from"./index-4f138c54.js";import{u as q,a as w,N as D}from"./NsEvent-bd421c86.js";import{s as N}from"./inputswitch.esm-1185adb2.js";const K=[6,16],S=7,B=1,b=30023,{fetch:L,fetchContacts:j}=E();function A(_,l,{showReplies:c,showReactions:i,showReposts:u}){return q({queryKey:["ns-user-feed",_,l,c,i,u],async queryFn(){console.log("fetching");let a=[];if(e(_)==="activity")a=[F(e(l))];else{const t=await j(e(l));console.log("contactsEvent",t,e(l));const o=(t==null?void 0:t.tags.filter(s=>s[0]==="p"))??[];console.log("followers",o==null?void 0:o.length),a=o.map(s=>s[1]).filter(s=>s!==e(l))??[]}if(console.log(a.length),a.length){const t=[B,b];e(i)===!0&&t.push(S),e(u)===!0&&t.push(...K);let o=await L([{kinds:t,authors:a,limit:150}]);return e(c)===!1&&(o=o.filter(s=>!U(s))),o.sort((s,g)=>g.created_at-s.created_at)}return[]}})}const H={class:"ns-user-feed-component"},O={class:"flex justify-content-between mb-4 inset-shadow-1 p-5 border-round"},Q={class:"flex align-items-center gap-2"},P=r("span",null,"Reposts",-1),W={class:"flex align-items-center gap-2"},X=r("span",null,"Replies",-1),$={class:"flex align-items-center gap-2"},z=r("span",null,"Reactions",-1),G={key:0,class:"flex flex-column gap-4"},J={key:1,class:"flex flex-column gap-4"},M=I({__name:"NsUserFeed",props:{type:{type:String,required:!0},pubkey:{type:String,required:!0}},setup(_){const l=_,c=h(!1),i=h(!1),u=h(!0),a=v(()=>l.pubkey),t=v(()=>l.type),{isLoading:o,data:s,isFetching:g,refetch:V}=A(t,a,{showReactions:i,showReplies:c,showReposts:u}),k=()=>{V()};return(Y,d)=>(f(),p("div",H,[r("div",O,[m(e(R),{loading:e(g),outlined:"",icon:"pi pi-refresh",onClick:k},null,8,["loading"]),r("div",Q,[m(e(N),{modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=n=>u.value=n)},null,8,["modelValue"]),P]),r("div",W,[m(e(N),{modelValue:c.value,"onUpdate:modelValue":d[1]||(d[1]=n=>c.value=n)},null,8,["modelValue"]),X]),r("div",$,[m(e(N),{modelValue:i.value,"onUpdate:modelValue":d[2]||(d[2]=n=>i.value=n)},null,8,["modelValue"]),z])]),e(o)?(f(),p("div",G,[(f(),p(y,null,x(5,n=>m(w,{key:n})),64))])):(f(),p("div",J,[(f(!0),p(y,null,x(e(s),n=>(f(),C(D,{key:n.id,event:n},null,8,["event"]))),128))]))]))}}),te=T(M,[["__file","/Users/nicolasc/Documents/projects/others/nosworld/src/components/structures/NsUserFeed/NsUserFeed.vue"]]);export{te as N};
