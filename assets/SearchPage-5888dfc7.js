import{d as U,u as N,r as c,z as o,a as b,o as d,c as n,b as i,e as t,w as V,f as r,_ as k,s as p,F as w,g as I,l as _,N as s,h as $,i as j}from"./index-1e8cf9a7.js";const A={class:"search-page"},B={class:"mb-5 p-4 white-box"},C=i("h1",null,"Search",-1),L={key:0},R={class:"flex gap-4"},D={class:"flex gap-4"},E={key:1},T={class:"text-center mt-4"},q={class:"flex flex-column gap-4"},W=U({__name:"SearchPage",setup(K){const v=N(),{fetch:y}=j(),m=c(!1),x=o.object({value:o.string().default("")}),u=b({value:""}),S=async()=>{u.value.startsWith("#")?v.push({name:_.tags.display,params:{tag:u.value.slice(1)}}):v.push({name:_.events.display,params:{id:u.value}})},g=c([]),f=c(!1),z=o.object({kind:o.string().default("1"),id:o.string().default(""),author:o.string().default(""),tag:o.object({type:o.string(),value:o.string()}),limit:o.string().default("10")}),e=b({kind:"1",id:"",author:"",tag:{type:"",value:""},limit:"10"}),F=async()=>{m.value=!0;const h={...e.kind?{kinds:[parseInt(e.kind,10)]}:{},...e.author?{authors:[e.author]}:{},...e.id?{ids:[e.id]}:{},...e.tag.type?{[`#${e.tag.type}`]:[e.tag.value]}:{},limit:e.limit?parseInt(e.limit,10):10},l=await y([h]);g.value=l.sort((a,M)=>M.created_at-a.created_at),m.value=!1};return(h,l)=>(d(),n("div",A,[i("div",B,[C,f.value?(d(),n("div",L,[t(k,{form:e,rules:r(z),onSubmit:F,class:"flex flex-column gap-4"},{default:V(()=>[i("div",R,[t(s,{name:"kind",label:"Kind",modelValue:e.kind,"onUpdate:modelValue":l[0]||(l[0]=a=>e.kind=a),modelModifiers:{trim:!0},autocomplete:"off",spellcheck:!1,autocapitalize:"off",autocorrect:"off"},null,8,["modelValue"]),t(s,{name:"limit",label:"Limit",modelValue:e.limit,"onUpdate:modelValue":l[1]||(l[1]=a=>e.limit=a),modelModifiers:{trim:!0},autocomplete:"off",spellcheck:!1,autocapitalize:"off",autocorrect:"off"},null,8,["modelValue"])]),t(s,{name:"author",label:"Author",modelValue:e.author,"onUpdate:modelValue":l[2]||(l[2]=a=>e.author=a),modelModifiers:{trim:!0},autocomplete:"off",spellcheck:!1,autocapitalize:"off",autocorrect:"off"},null,8,["modelValue"]),t(s,{name:"id",label:"ID",modelValue:e.id,"onUpdate:modelValue":l[3]||(l[3]=a=>e.id=a),modelModifiers:{trim:!0},autocomplete:"off",spellcheck:!1,autocapitalize:"off",autocorrect:"off"},null,8,["modelValue"]),i("div",D,[t(s,{name:"tag.type",label:"Tag",modelValue:e.tag.type,"onUpdate:modelValue":l[4]||(l[4]=a=>e.tag.type=a),modelModifiers:{trim:!0},autocomplete:"off",spellcheck:!1,autocapitalize:"off",autocorrect:"off"},null,8,["modelValue"]),t(s,{name:"tag.value",label:"Tag value",modelValue:e.tag.value,"onUpdate:modelValue":l[5]||(l[5]=a=>e.tag.value=a),modelModifiers:{trim:!0},autocomplete:"off",spellcheck:!1,autocapitalize:"off",autocorrect:"off"},null,8,["modelValue"])]),t(r(p),{type:"submit",label:"Search",loading:m.value},null,8,["loading"])]),_:1},8,["form","rules"])])):(d(),n("div",E,[t(k,{form:u,rules:r(x),onSubmit:S,class:"flex flex-column gap-4"},{default:V(()=>[t(s,{name:"value",modelValue:u.value,"onUpdate:modelValue":l[6]||(l[6]=a=>u.value=a),modelModifiers:{trim:!0},placeholder:"Enter an ID, npub, nevent, naddr...",autocomplete:"off",spellcheck:!1,autocapitalize:"off",autocorrect:"off"},null,8,["modelValue"]),t(r(p),{type:"submit",label:"Search",loading:m.value},null,8,["loading"])]),_:1},8,["form","rules"])])),i("div",T,[t(r(p),{label:f.value?"simpler search":"advanced",onClick:l[7]||(l[7]=a=>f.value=!f.value),text:""},null,8,["label"])])]),i("div",q,[(d(!0),n(w,null,I(g.value,a=>(d(),n("div",{key:a.id},[t($,{event:a},null,8,["event"])]))),128))])]))}});export{W as default};
