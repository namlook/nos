import{f as s,h as _,d as N,r as f,q as y,G as T,o as n,H as o,c as l,e as E,J as b,F as D,g as q,M as C,_ as g,u as x,X as F,l as P}from"./index-5d52fb4b.js";import{u as p,a as v,N as w}from"./NsEvent-718a278e.js";import"./index.esm-44f27072.js";const{fetchEvent:B,fetchEventComments:L}=_();function j(e,{enabled:t}={enabled:!0}){return p({queryKey:["ns-thread",e],queryFn(){return B(s(e))},enabled:t})}function O(e){return p({queryKey:["event-comments",e],async queryFn(){return await L(s(e))},retry:!1})}const Q={key:2},K=N({__name:"NsThread",props:{event:{type:Object},relays:{type:Array,default:()=>[]},id:{type:String},root:{type:Object},inline:Boolean,inThread:Boolean},setup(e){const t=e;f([]),f([]);const u=y(()=>{var i;return((i=t.event)==null?void 0:i.id)??t.id}),{isLoading:c,data:d}=j(u,{enabled:!t.event}),r=y(()=>t.event??d.value),{isLoading:a,data:h}=O(u);return(i,$)=>{const k=T("NsThread",!0);return s(c)?(n(),o(v,{key:0,"in-thread":e.inThread},null,8,["in-thread"])):r.value?(n(),l("div",{key:1,class:C(["ns-thread-component",{"white-box":!e.inThread}])},[E(w,{event:r.value,"in-thread":!!e.root},null,8,["event","in-thread"]),s(a)?(n(),o(v,{key:0,"in-thread":e.inThread},null,8,["in-thread"])):b("v-if",!0),(n(!0),l(D,null,q(s(h),m=>(n(),o(k,{class:"ml-2 border-left-2 border-primary-100",key:m.id,event:m,root:e.root??r.value,"in-thread":""},null,8,["event","root"]))),128))],2)):(n(),l("div",Q,"NOT FOUND"))}}});const S=g(K,[["__scopeId","data-v-5be3ffdd"],["__file","/Users/nicolasc/Documents/projects/others/nosworld/src/components/structures/NsThread/NsThread.vue"]]),{fetchEvent:U}=_();function I(e){return p({queryKey:["event-display-page",e],queryFn(){return U(s(e))}})}const V=N({__name:"EventDisplayPage",props:{id:{type:String,required:!0}},setup(e){const t=e,u=x(),c=y(()=>t.id),{isLoading:d,data:r}=I(c);return F(async()=>{var a;((a=r.value)==null?void 0:a.schema["@type"])==="Person"&&u.push({name:P.profile.display,params:{pubkey:r.value.pubkey},replace:!0})}),(a,h)=>s(d)?(n(),o(v,{key:0})):(n(),o(S,{key:1,id:e.id,event:s(r)},null,8,["id","event"]))}}),H=g(V,[["__file","/Users/nicolasc/Documents/projects/others/nosworld/src/pages/EventDisplayPage/EventDisplayPage.vue"]]);export{H as default};
