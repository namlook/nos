import{d as N,u as U,r as f,a as h,o as i,c as r,b as u,e as t,w as b,f as n,s as p,F as M,g as w,l as j,h as I,_ as P}from"./index-5d52fb4b.js";import{z as o,N as V,a as s}from"./NsFormField-cc92648b.js";import{N as A}from"./NsEvent-718a278e.js";import"./index.esm-44f27072.js";import"./textarea.esm-bfb137f9.js";const B={class:"search-page"},C={class:"mb-5 p-4 white-box"},D=u("h1",null,"Search",-1),E={key:0},L={class:"flex gap-4"},R={class:"flex gap-4"},T={key:1},$={class:"text-center mt-4"},q={class:"flex flex-column gap-4"},K=N({__name:"SearchPage",setup(G){const k=U(),{fetch:_}=I(),d=f(!1),y=o.object({value:o.string().default("")}),m=h({value:""}),x=async()=>{k.push({name:j.events.display,params:{id:m.value}})},v=f([]),c=f(!1),S=o.object({kind:o.string().default("1"),id:o.string().default(""),author:o.string().default(""),tag:o.object({type:o.string(),value:o.string()}),limit:o.string().default("10")}),e=h({kind:"1",id:"",author:"",tag:{type:"",value:""},limit:"10"}),F=async()=>{d.value=!0;const g={...e.kind?{kinds:[parseInt(e.kind,10)]}:{},...e.author?{authors:[e.author]}:{},...e.id?{ids:[e.id]}:{},...e.tag.type?{[`#${e.tag.type}`]:[e.tag.value]}:{},limit:e.limit?parseInt(e.limit,10):10},l=await _([g]);v.value=l.sort((a,z)=>z.created_at-a.created_at),d.value=!1};return(g,l)=>(i(),r("div",B,[u("div",C,[D,c.value?(i(),r("div",E,[t(V,{form:e,rules:n(S),onSubmit:F,class:"flex flex-column gap-4"},{default:b(()=>[u("div",L,[t(s,{name:"kind",label:"Kind",modelValue:e.kind,"onUpdate:modelValue":l[0]||(l[0]=a=>e.kind=a),modelModifiers:{trim:!0},autocomplete:"off",spellcheck:!1,autocapitalize:"off",autocorrect:"off"},null,8,["modelValue"]),t(s,{name:"limit",label:"Limit",modelValue:e.limit,"onUpdate:modelValue":l[1]||(l[1]=a=>e.limit=a),modelModifiers:{trim:!0},autocomplete:"off",spellcheck:!1,autocapitalize:"off",autocorrect:"off"},null,8,["modelValue"])]),t(s,{name:"author",label:"Author",modelValue:e.author,"onUpdate:modelValue":l[2]||(l[2]=a=>e.author=a),modelModifiers:{trim:!0},autocomplete:"off",spellcheck:!1,autocapitalize:"off",autocorrect:"off"},null,8,["modelValue"]),t(s,{name:"id",label:"ID",modelValue:e.id,"onUpdate:modelValue":l[3]||(l[3]=a=>e.id=a),modelModifiers:{trim:!0},autocomplete:"off",spellcheck:!1,autocapitalize:"off",autocorrect:"off"},null,8,["modelValue"]),u("div",R,[t(s,{name:"tag.type",label:"Tag",modelValue:e.tag.type,"onUpdate:modelValue":l[4]||(l[4]=a=>e.tag.type=a),modelModifiers:{trim:!0},autocomplete:"off",spellcheck:!1,autocapitalize:"off",autocorrect:"off"},null,8,["modelValue"]),t(s,{name:"tag.value",label:"Tag value",modelValue:e.tag.value,"onUpdate:modelValue":l[5]||(l[5]=a=>e.tag.value=a),modelModifiers:{trim:!0},autocomplete:"off",spellcheck:!1,autocapitalize:"off",autocorrect:"off"},null,8,["modelValue"])]),t(n(p),{type:"submit",label:"Search",loading:d.value},null,8,["loading"])]),_:1},8,["form","rules"])])):(i(),r("div",T,[t(V,{form:m,rules:n(y),onSubmit:x,class:"flex flex-column gap-4"},{default:b(()=>[t(s,{name:"value",modelValue:m.value,"onUpdate:modelValue":l[6]||(l[6]=a=>m.value=a),modelModifiers:{trim:!0},placeholder:"Enter an ID, npub, nevent, naddr...",autocomplete:"off",spellcheck:!1,autocapitalize:"off",autocorrect:"off"},null,8,["modelValue"]),t(n(p),{type:"submit",label:"Search",loading:d.value},null,8,["loading"])]),_:1},8,["form","rules"])])),u("div",$,[t(n(p),{label:c.value?"simpler search":"advanced",onClick:l[7]||(l[7]=a=>c.value=!c.value),text:""},null,8,["label"])])]),u("div",q,[(i(!0),r(M,null,w(v.value,a=>(i(),r("div",{key:a.id},[t(A,{event:a},null,8,["event"])]))),128))])]))}}),X=P(K,[["__file","/Users/nicolasc/Documents/projects/others/nosworld/src/pages/SearchPage/SearchPage.vue"]]);export{X as default};
