import{f as s,h as _,d as N,r as f,q as u,G as E,o as n,H as c,c as y,e as b,J as q,F as D,g as C,M as x,_ as g,u as F,X as P,l as w}from"./index-4f138c54.js";import{u as p,a as v,N as B}from"./NsEvent-bd421c86.js";import"./index.esm-3f7fdff6.js";import"./use-settings-48c8f733.js";const{fetchEvent:L,fetchEventComments:j}=_();function O(e,{enabled:t}){return p({queryKey:["ns-thread",e],queryFn(){return L(s(e))},enabled:t})}function Q(e){return p({queryKey:["event-comments",e],async queryFn(){return await j(s(e))}})}const K={key:2},S=N({__name:"NsThread",props:{event:{type:Object},relays:{type:Array,default:()=>[]},id:{type:String},root:{type:Object},inline:Boolean,inThread:Boolean},setup(e){const t=e;f([]),f([]);const r=u(()=>{var l;return((l=t.event)==null?void 0:l.id)??t.id}),i=u(()=>!!r.value&&!t.event),{isLoading:d,data:o}=O(r,{enabled:i}),a=u(()=>t.event??o.value),{isLoading:h,data:T}=Q(r);return(l,z)=>{const k=E("NsThread",!0);return s(d)?(n(),c(v,{key:0,"in-thread":e.inThread},null,8,["in-thread"])):a.value?(n(),y("div",{key:1,class:x(["ns-thread-component",{"white-box":!e.inThread}])},[b(B,{event:a.value,"in-thread":!!e.root},null,8,["event","in-thread"]),s(h)?(n(),c(v,{key:0,"in-thread":e.inThread},null,8,["in-thread"])):q("v-if",!0),(n(!0),y(D,null,C(s(T),m=>(n(),c(k,{class:"ml-2 border-left-2 border-primary-100",key:m.id,event:m,root:e.root??a.value,"in-thread":""},null,8,["event","root"]))),128))],2)):(n(),y("div",K,"NOT FOUND"))}}});const U=g(S,[["__scopeId","data-v-5be3ffdd"],["__file","/Users/nicolasc/Documents/projects/others/nosworld/src/components/structures/NsThread/NsThread.vue"]]),{fetchEvent:I}=_();function V(e){return p({queryKey:["event-display-page",e],queryFn(){return I(s(e))}})}const $=N({__name:"EventDisplayPage",props:{id:{type:String,required:!0}},setup(e){const t=e,r=F(),i=u(()=>t.id),{isLoading:d,data:o}=V(i);return P(async()=>{var a;((a=o.value)==null?void 0:a.schema["@type"])==="Person"&&r.push({name:w.profile.display,params:{pubkey:o.value.pubkey,feedType:"activity"},replace:!0})}),(a,h)=>s(d)?(n(),c(v,{key:0})):(n(),c(U,{key:1,id:e.id,event:s(o)},null,8,["id","event"]))}}),M=g($,[["__file","/Users/nicolasc/Documents/projects/others/nosworld/src/pages/EventDisplayPage/EventDisplayPage.vue"]]);export{M as default};
