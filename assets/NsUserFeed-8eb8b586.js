import{B as N,z as P,o as p,c as m,b as u,x as h,f as o,V as I,W as F,h as j,d as B,r as g,q as k,e as b,F as w,g as O,H as C,_ as $}from"./index-c079a346.js";import{u as D,a as E,N as U}from"./NsEvent-dc3fa08d.js";var x=`
.p-inputswitch {
    display: inline-block;
}

.p-inputswitch-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border: 1px solid transparent;
}

.p-inputswitch-slider:before {
    position: absolute;
    content: '';
    top: 50%;
}
`,K={root:{position:"relative"}},T={root:function(e){var n=e.instance,s=e.props;return["p-inputswitch p-component",{"p-inputswitch-checked":n.checked,"p-disabled":s.disabled,"p-focus":n.focused}]},slider:"p-inputswitch-slider"},R=N(x,{name:"inputswitch",manual:!0}),q=R.load,L={name:"BaseInputSwitch",extends:P,props:{modelValue:{type:null,default:!1},trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},disabled:{type:Boolean,default:!1},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},inputProps:{type:null,default:null},"aria-labelledby":{type:String,default:null},"aria-label":{type:String,default:null}},css:{classes:T,inlineStyles:K,loadStyle:q},provide:function(){return{$parentInstance:this}}},v={name:"InputSwitch",extends:L,emits:["click","update:modelValue","change","input","focus","blur"],data:function(){return{focused:!1}},methods:{onClick:function(e){if(!this.disabled){var n=this.checked?this.falseValue:this.trueValue;this.$emit("click",e),this.$emit("update:modelValue",n),this.$emit("change",e),this.$emit("input",n),this.$refs.input.focus()}},onFocus:function(e){this.focused=!0,this.$emit("focus",e)},onBlur:function(e){this.focused=!1,this.$emit("blur",e)}},computed:{checked:function(){return this.modelValue===this.trueValue}}};function y(t){"@babel/helpers - typeof";return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(t)}function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,s)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V(Object(n),!0).forEach(function(s){A(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function A(t,e,n){return e=H(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H(t){var e=Q(t,"string");return y(e)==="symbol"?e:String(e)}function Q(t,e){if(y(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e||"default");if(y(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W=["id","checked","disabled","aria-checked","aria-labelledby","aria-label"];function z(t,e,n,s,c,l){return p(),m("div",h({class:t.cx("root"),style:t.sx("root"),onClick:e[2]||(e[2]=function(r){return l.onClick(r)})},t.ptm("root"),{"data-pc-name":"inputswitch"}),[u("div",h({class:"p-hidden-accessible"},t.ptm("hiddenInputWrapper"),{"data-p-hidden-accessible":!0}),[u("input",h({ref:"input",id:t.inputId,type:"checkbox",role:"switch",class:t.inputClass,style:t.inputStyle,checked:l.checked,disabled:t.disabled,"aria-checked":l.checked,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,onFocus:e[0]||(e[0]=function(r){return l.onFocus(r)}),onBlur:e[1]||(e[1]=function(r){return l.onBlur(r)})},_(_({},t.inputProps),t.ptm("hiddenInput"))),null,16,W)],16),u("span",h({class:t.cx("slider")},t.ptm("slider")),null,16)],16)}v.render=z;const X=[6,16],G=7,J=1,M=30023,{fetch:Y,fetchContacts:Z}=j();function ee(t,e,{showReplies:n,showReactions:s,showReposts:c}){return D({queryKey:["ns-user-feed",t,e,n,s,c],async queryFn(){let l=[];if(o(t)==="activity")console.log("activity"),l=[I(o(e))];else{console.log("feed");const r=await Z(o(e)),d=r==null?void 0:r.tags.filter(i=>i[0]==="p");l=(d==null?void 0:d.map(i=>i[1]).filter(i=>i!==o(e)))??[]}if(l.length){const r=[J,M];o(s)===!0&&r.push(G),o(c)===!0&&r.push(...X);let d=await Y([{kinds:r,authors:l,limit:100}]);return o(n)===!1&&(d=d.filter(i=>!F(i))),d.sort((i,S)=>S.created_at-i.created_at)}return[]}})}const te={class:"ns-user-feed-component"},ne={class:"flex justify-content-between mb-4 inset-shadow-1 p-5 border-round"},se={class:"flex align-items-center gap-2"},re=u("span",null,"Reposts",-1),le={class:"flex align-items-center gap-2"},oe=u("span",null,"Replies",-1),ie={class:"flex align-items-center gap-2"},ae=u("span",null,"Reactions",-1),ue={key:0,class:"flex flex-column gap-4"},ce={key:1,class:"flex flex-column gap-4"},de=B({__name:"NsUserFeed",props:{type:{type:String,required:!0},pubkey:{type:String,required:!0}},setup(t){const e=t,n=g(!1),s=g(!1),c=g(!0),l=k(()=>e.pubkey),r=k(()=>e.type),{isLoading:d,data:i}=ee(r,l,{showReactions:s,showReplies:n,showReposts:c});return(S,f)=>(p(),m("div",te,[u("div",ne,[u("div",se,[b(o(v),{modelValue:c.value,"onUpdate:modelValue":f[0]||(f[0]=a=>c.value=a)},null,8,["modelValue"]),re]),u("div",le,[b(o(v),{modelValue:n.value,"onUpdate:modelValue":f[1]||(f[1]=a=>n.value=a)},null,8,["modelValue"]),oe]),u("div",ie,[b(o(v),{modelValue:s.value,"onUpdate:modelValue":f[2]||(f[2]=a=>s.value=a)},null,8,["modelValue"]),ae])]),o(d)?(p(),m("div",ue,[(p(),m(w,null,O(5,a=>b(E,{key:a})),64))])):(p(),m("div",ce,[(p(!0),m(w,null,O(o(i),a=>(p(),C(U,{key:a.id,event:a},null,8,["event"]))),128))]))]))}}),me=$(de,[["__file","/Users/nicolasc/Documents/projects/others/nosworld/src/components/structures/NsUserFeed/NsUserFeed.vue"]]);export{me as N};
